(()=>{var __webpack_modules__={9696:(t,e,r)=>{"use strict";r.d(e,{EC:()=>n,OH:()=>o,kW:()=>s,pw:()=>_,sH:()=>a});var i=r(3186);class n extends Error{constructor(t,e){super("Line "+t+": "+e),this.name="CompilerError"}}class s{constructor(){this.size=0,this.names=[],this.types=[],this.values=[]}push(t,e,r){const i=this.size;return this.size++,this.names.push(t),this.types.push(e),this.values.push(r),i}pop(){const t=this.size-1;return this.names.pop(),this.types.pop(),this.values.pop(),this.size--,t}lookup(t){const e=this.names.indexOf(t);if(-1!==e)return e}num_variables(){return this.size}get_name(t){return this.names[t]}get_type(t){return this.types[t]}get_value(t){return this.values[t]}}class o{constructor(){this.size=0,this.names=[],this.types=[]}push(t,e){const r=this.size;return this.size++,this.names.push(t),this.types.push(e),r}pop(){const t=this.size-1;return this.names.pop(),this.types.pop(),this.size--,t}lookup(t){const e=this.names.indexOf(t);if(-1!==e)return e}get_size(){return this.size}get_name(t){return this.names[t]}get_type(t){return this.types[t]}}function a(t,e){for(let r=t.length-1;r>=0;r--){const i=t[r].lookup(e);if(void 0!==i)return[r,i]}}const _=new Map([["i32",i.Ay.LGCI],["f32",i.Ay.LGCF32],["false",i.Ay.LGCB0],["true",i.Ay.LGCB1],["string",i.Ay.LGCS],["function",i.Ay.NEWC]])},3186:(t,e,r)=>{"use strict";var i;r.d(e,{Ay:()=>n}),function(t){t[t.NOP=0]="NOP",t[t.LDCI=1]="LDCI",t[t.LGCI=2]="LGCI",t[t.LDCF32=3]="LDCF32",t[t.LGCF32=4]="LGCF32",t[t.LDCF64=5]="LDCF64",t[t.LGCF64=6]="LGCF64",t[t.LDCB0=7]="LDCB0",t[t.LDCB1=8]="LDCB1",t[t.LGCB0=9]="LGCB0",t[t.LGCB1=10]="LGCB1",t[t.LGCU=11]="LGCU",t[t.LGCN=12]="LGCN",t[t.LGCS=13]="LGCS",t[t.POPG=14]="POPG",t[t.POPB=15]="POPB",t[t.POPF=16]="POPF",t[t.ADDG=17]="ADDG",t[t.ADDF=18]="ADDF",t[t.SUBG=19]="SUBG",t[t.SUBF=20]="SUBF",t[t.MULG=21]="MULG",t[t.MULF=22]="MULF",t[t.DIVG=23]="DIVG",t[t.DIVF=24]="DIVF",t[t.MODG=25]="MODG",t[t.MODF=26]="MODF",t[t.NOTG=27]="NOTG",t[t.NOTB=28]="NOTB",t[t.LTG=29]="LTG",t[t.LTF=30]="LTF",t[t.GTG=31]="GTG",t[t.GTF=32]="GTF",t[t.LEG=33]="LEG",t[t.LEF=34]="LEF",t[t.GEG=35]="GEG",t[t.GEF=36]="GEF",t[t.EQG=37]="EQG",t[t.EQF=38]="EQF",t[t.EQB=39]="EQB",t[t.NEWC=40]="NEWC",t[t.NEWA=41]="NEWA",t[t.LDLG=42]="LDLG",t[t.LDLF=43]="LDLF",t[t.LDLB=44]="LDLB",t[t.STLG=45]="STLG",t[t.STLB=46]="STLB",t[t.STLF=47]="STLF",t[t.LDPG=48]="LDPG",t[t.LDPF=49]="LDPF",t[t.LDPB=50]="LDPB",t[t.STPG=51]="STPG",t[t.STPB=52]="STPB",t[t.STPF=53]="STPF",t[t.LDAG=54]="LDAG",t[t.LDAB=55]="LDAB",t[t.LDAF=56]="LDAF",t[t.STAG=57]="STAG",t[t.STAB=58]="STAB",t[t.STAF=59]="STAF",t[t.BRT=60]="BRT",t[t.BRF=61]="BRF",t[t.BR=62]="BR",t[t.JMP=63]="JMP",t[t.CALL=64]="CALL",t[t.CALLT=65]="CALLT",t[t.CALLP=66]="CALLP",t[t.CALLTP=67]="CALLTP",t[t.CALLV=68]="CALLV",t[t.CALLTV=69]="CALLTV",t[t.RETG=70]="RETG",t[t.RETF=71]="RETF",t[t.RETB=72]="RETB",t[t.RETU=73]="RETU",t[t.RETN=74]="RETN",t[t.DUP=75]="DUP",t[t.NEWENV=76]="NEWENV",t[t.POPENV=77]="POPENV",t[t.NEWCP=78]="NEWCP",t[t.NEWCV=79]="NEWCV",t[t.NEGG=80]="NEGG",t[t.NEGF=81]="NEGF",t[t.NEQG=82]="NEQG",t[t.NEQF=83]="NEQF",t[t.NEQB=84]="NEQB",t[t.GOTO=85]="GOTO",t[t.NEWT=86]="NEWT",t[t.ENDT=87]="ENDT",t[t.JOIN=88]="JOIN",t[t.NEWL=89]="NEWL",t[t.LOCK=90]="LOCK",t[t.UNLOCK=91]="UNLOCK",t[t.LDPA=92]="LDPA",t[t.DEREF=93]="DEREF",t[t.ARRAY_LEN=1e3]="ARRAY_LEN",t[t.DISPLAY=1001]="DISPLAY",t[t.DRAW_DATA=1002]="DRAW_DATA",t[t.ERROR=1003]="ERROR",t[t.IS_ARRAY=1004]="IS_ARRAY",t[t.IS_BOOL=1005]="IS_BOOL",t[t.IS_FUNC=1006]="IS_FUNC",t[t.IS_NULL=1007]="IS_NULL",t[t.IS_NUMBER=1008]="IS_NUMBER",t[t.IS_STRING=1009]="IS_STRING",t[t.IS_UNDEFINED=1010]="IS_UNDEFINED",t[t.MATH_ABS=1011]="MATH_ABS",t[t.MATH_ACOS=1012]="MATH_ACOS",t[t.MATH_ACOSH=1013]="MATH_ACOSH",t[t.MATH_ASIN=1014]="MATH_ASIN",t[t.MATH_ASINH=1015]="MATH_ASINH",t[t.MATH_ATAN=1016]="MATH_ATAN",t[t.MATH_ATAN2=1017]="MATH_ATAN2",t[t.MATH_ATANH=1018]="MATH_ATANH",t[t.MATH_CBRT=1019]="MATH_CBRT",t[t.MATH_CEIL=1020]="MATH_CEIL",t[t.MATH_CLZ32=1021]="MATH_CLZ32",t[t.MATH_COS=1022]="MATH_COS",t[t.MATH_COSH=1023]="MATH_COSH",t[t.MATH_EXP=1024]="MATH_EXP",t[t.MATH_EXPM1=1025]="MATH_EXPM1",t[t.MATH_FLOOR=1026]="MATH_FLOOR",t[t.MATH_FROUND=1027]="MATH_FROUND",t[t.MATH_HYPOT=1028]="MATH_HYPOT",t[t.MATH_IMUL=1029]="MATH_IMUL",t[t.MATH_LOG=1030]="MATH_LOG",t[t.MATH_LOG1P=1031]="MATH_LOG1P",t[t.MATH_LOG2=1032]="MATH_LOG2",t[t.MATH_LOG10=1033]="MATH_LOG10",t[t.MATH_MAX=1034]="MATH_MAX",t[t.MATH_MIN=1035]="MATH_MIN",t[t.MATH_POW=1036]="MATH_POW",t[t.MATH_RANDOM=1037]="MATH_RANDOM",t[t.MATH_ROUND=1038]="MATH_ROUND",t[t.MATH_SIGN=1039]="MATH_SIGN",t[t.MATH_SIN=1040]="MATH_SIN",t[t.MATH_SINH=1041]="MATH_SINH",t[t.MATH_SQRT=1042]="MATH_SQRT",t[t.MATH_TAN=1043]="MATH_TAN",t[t.MATH_TANH=1044]="MATH_TANH",t[t.MATH_TRUNC=1045]="MATH_TRUNC",t[t.PARSE_INT=1046]="PARSE_INT",t[t.RUNTIME=1047]="RUNTIME",t[t.STREAM=1048]="STREAM",t[t.STRINGIFY=1049]="STRINGIFY",t[t.PROMPT=1050]="PROMPT",t[t.DISPLAY_LIST=1051]="DISPLAY_LIST",t[t.CHAR_AT=1052]="CHAR_AT",t[t.ARITY=1053]="ARITY",t[t.EXECUTE=2e3]="EXECUTE",t[t.TEST_AND_SET=2001]="TEST_AND_SET",t[t.CLEAR=2002]="CLEAR"}(i||(i={}));const n=i},8365:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>Rust2CompileTimeEvaluator});var antlr4ts_tree_AbstractParseTreeVisitor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5585),antlr4ts_tree_AbstractParseTreeVisitor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(antlr4ts_tree_AbstractParseTreeVisitor__WEBPACK_IMPORTED_MODULE_0__),_compiler__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9696);class Rust2CompileTimeEvaluator extends antlr4ts_tree_AbstractParseTreeVisitor__WEBPACK_IMPORTED_MODULE_0__.AbstractParseTreeVisitor{constructor(){super(...arguments),this.language_version="Rust2"}defaultResult(){return{ok:!0,value:NaN}}aggregateResult(t,e){return t.ok?e.ok?{ok:!0,value:e.value}:e:t}visitExpression(ctx){const literal_ctx=ctx.literal();return void 0!==literal_ctx?void 0!==literal_ctx.boolean_literal()?{ok:!0,value:eval(literal_ctx.boolean_literal().text)}:void 0!==literal_ctx.integer_literal()?{ok:!0,value:parseInt(literal_ctx.integer_literal().text)}:void 0!==literal_ctx.float_literal()?{ok:!0,value:parseFloat(literal_ctx.float_literal().text)}:void 0!==literal_ctx.string_literal()?{ok:!0,value:literal_ctx.string_literal().text}:{ok:!1,error:new _compiler__WEBPACK_IMPORTED_MODULE_1__.EC(ctx.start.line,"Unknown literal")}:{ok:!1,error:new _compiler__WEBPACK_IMPORTED_MODULE_1__.EC(ctx.start.line,"Not implemented: Only literals are allowed in compile-time expressions")}}}},1829:(t,e,r)=>{"use strict";r.d(e,{p:()=>pe}),r(2561),r(1603);var i=r(2221),n=r(493),s=r(2807),o=r(1088),a=r(7435),_=r(659);class l extends s.Lexer{get vocabulary(){return l.VOCABULARY}constructor(t){super(t),this._interp=new o.LexerATNSimulator(l._ATN,this)}get grammarFileName(){return"Rust2.g4"}get ruleNames(){return l.ruleNames}get serializedATN(){return l._serializedATN}get channelNames(){return l.channelNames}get modeNames(){return l.modeNames}static get _ATN(){return l.__ATN||(l.__ATN=(new n.ATNDeserializer).deserialize(_.toCharArray(l._serializedATN))),l.__ATN}}l.T__0=1,l.T__1=2,l.T__2=3,l.T__3=4,l.T__4=5,l.T__5=6,l.T__6=7,l.T__7=8,l.T__8=9,l.T__9=10,l.T__10=11,l.T__11=12,l.T__12=13,l.T__13=14,l.T__14=15,l.T__15=16,l.T__16=17,l.T__17=18,l.T__18=19,l.T__19=20,l.T__20=21,l.T__21=22,l.T__22=23,l.T__23=24,l.T__24=25,l.T__25=26,l.T__26=27,l.T__27=28,l.T__28=29,l.T__29=30,l.T__30=31,l.T__31=32,l.T__32=33,l.T__33=34,l.T__34=35,l.T__35=36,l.T__36=37,l.T__37=38,l.T__38=39,l.T__39=40,l.T__40=41,l.T__41=42,l.T__42=43,l.T__43=44,l.JUNK=45,l.NUMBER=46,l.IDENTIFIER=47,l.channelNames=["DEFAULT_TOKEN_CHANNEL","HIDDEN"],l.modeNames=["DEFAULT_MODE"],l.ruleNames=["T__0","T__1","T__2","T__3","T__4","T__5","T__6","T__7","T__8","T__9","T__10","T__11","T__12","T__13","T__14","T__15","T__16","T__17","T__18","T__19","T__20","T__21","T__22","T__23","T__24","T__25","T__26","T__27","T__28","T__29","T__30","T__31","T__32","T__33","T__34","T__35","T__36","T__37","T__38","T__39","T__40","T__41","T__42","T__43","JUNK","NUMBER","IDENTIFIER","LETTER","DIGIT"],l._LITERAL_NAMES=[void 0,"';'","'const'","':'","'='","'let'","'mut'","'fn'","'->'","'return'","'&'","'&mut'","'*'","'||'","'|'","'('","')'","'if'","'else'","'()'","','","'{'","'}'","'+'","'-'","'/'","'%'","'=='","'!='","'<'","'>'","'<='","'>='","'!'","'&&'","'.'","'true'","'false'","'\"'","'\\'","'i32'","'f32'","'bool'","'str'","'println!'"],l._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"JUNK","NUMBER","IDENTIFIER"],l.VOCABULARY=new a.VocabularyImpl(l._LITERAL_NAMES,l._SYMBOLIC_NAMES,[]),l._serializedATN="ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰1ÄŠ\b\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!\"\t\"#\t#$\t$%\t%&\t&'\t'(\t()\t)*\t*+\t+,\t,-\t-.\t./\t/0\t01\t12\t2\b\b\b\t\t\t\n\n\n\n\n\n\n\v\v\f\f\f\f\f\r\r   !!!\"\"###$$%%%%%&&&&&&''(())))****+++++,,,,---------..Ã³\n.\r..Ã´..//Ãº\n/\r//Ã»00000Ä‚\n0\f00Ä…\v011223\t\v\r\b\t\n\v\f\r!#%')+-/13579;= ?!A\"C#E$G%I&K'M(O)Q*S+U,W-Y.[/]0_1ac\v\f\"\"C\\c|2;ÄŒ\t\v\r!#%')+-/13579;=?ACEGIKMOQSUWY[]_egm\to\vq\ruy|Â†ÂˆÂÂÂ’Â”!Â–#Â˜%Â›'Â )Â£+Â¥-Â§/Â©1Â«3Â­5Â¯7Â±9Â´;Â·=Â¹?Â»AÂ¾CÃEÃƒGÃ†IÃˆKÃMÃ“OÃ•QÃ—SÃ›UÃŸWÃ¤YÃ¨[Ã²]Ã¹_Ã½aÄ†cÄˆef=fghehiqijpjkuklvlmn<n\bop?p\nqrnrsgstvt\fuvovwwwxvxyzhz{p{|}/}~@~Â€tÂ€ÂgÂÂ‚vÂ‚ÂƒwÂƒÂ„tÂ„Â…pÂ…Â†Â‡(Â‡ÂˆÂ‰(Â‰ÂŠoÂŠÂ‹wÂ‹ÂŒvÂŒÂÂ,ÂÂÂ~ÂÂ‘~Â‘Â’Â“~Â“Â”Â•*Â• Â–Â—+Â—\"Â˜Â™kÂ™ÂšhÂš$Â›ÂœgÂœÂnÂÂuÂÂŸgÂŸ&Â Â¡*Â¡Â¢+Â¢(Â£Â¤.Â¤*Â¥Â¦}Â¦,Â§Â¨Â¨.Â©Âª-Âª0Â«Â¬/Â¬2Â­Â®1Â®4Â¯Â°'Â°6Â±Â²?Â²Â³?Â³8Â´Âµ#ÂµÂ¶?Â¶:Â·Â¸>Â¸<Â¹Âº@Âº>Â»Â¼>Â¼Â½?Â½@Â¾Â¿@Â¿Ã€?Ã€BÃÃ‚#Ã‚DÃƒÃ„(Ã„Ã…(Ã…FÃ†Ã‡0Ã‡HÃˆÃ‰vÃ‰ÃŠtÃŠÃ‹wÃ‹ÃŒgÃŒJÃÃhÃÃcÃÃnÃÃ‘uÃ‘Ã’gÃ’LÃ“Ã”$Ã”NÃ•Ã–^Ã–PÃ—Ã˜kÃ˜Ã™5Ã™Ãš4ÃšRÃ›ÃœhÃœÃ5ÃÃ4ÃTÃŸÃ dÃ Ã¡qÃ¡Ã¢qÃ¢Ã£nÃ£VÃ¤Ã¥uÃ¥Ã¦vÃ¦Ã§tÃ§XÃ¨Ã©rÃ©ÃªtÃªÃ«kÃ«Ã¬pÃ¬Ã­vÃ­Ã®nÃ®Ã¯pÃ¯Ã°#Ã°ZÃ±Ã³\tÃ²Ã±Ã³Ã´Ã´Ã²Ã´ÃµÃµÃ¶Ã¶Ã·\b.Ã·\\Ã¸Ãºc2Ã¹Ã¸ÃºÃ»Ã»Ã¹Ã»Ã¼Ã¼^Ã½Äƒa1Ã¾Ä‚a1Ã¿Ä‚c2Ä€Ä‚aÄÃ¾ÄÃ¿ÄÄ€Ä‚Ä…ÄƒÄÄƒÄ„Ä„`Ä…ÄƒÄ†Ä‡\tÄ‡bÄˆÄ‰\tÄ‰dÃ´Ã»ÄÄƒ\b";var u=r(4274),c=r(2262),h=r(755),p=r(5922),d=r(1097),m=r(3161),f=r(9449),v=r(7760);class x extends p.Parser{get vocabulary(){return x.VOCABULARY}get grammarFileName(){return"Rust2.g4"}get ruleNames(){return x.ruleNames}get serializedATN(){return x._serializedATN}createFailedPredicateException(t,e){return new c.FailedPredicateException(this,t,e)}constructor(t){super(t),this._interp=new m.ParserATNSimulator(x._ATN,this)}program(){let t,e=new T(this._ctx,this.state);this.enterRule(e,0,x.RULE_program);try{for(this.enterOuterAlt(e,1),this.state=90,this.program_element(),this.state=94,this._errHandler.sync(this),t=this._input.LA(1);t===x.T__1||t===x.T__6;)this.state=91,this.program_element(),this.state=96,this._errHandler.sync(this),t=this._input.LA(1);this.state=97,this.match(x.EOF)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}program_element(){let t=new R(this._ctx,this.state);this.enterRule(t,2,x.RULE_program_element);try{switch(this.enterOuterAlt(t,1),this.state=101,this._errHandler.sync(this),this._input.LA(1)){case x.T__1:this.state=99,this.constant_declaration();break;case x.T__6:this.state=100,this.function_declaration();break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}statement(){let t=new E(this._ctx,this.state);this.enterRule(t,4,x.RULE_statement);try{switch(this.state=111,this._errHandler.sync(this),this._input.LA(1)){case x.T__1:this.enterOuterAlt(t,1),this.state=103,this.constant_declaration();break;case x.T__4:this.enterOuterAlt(t,2),this.state=104,this.variable_declaration();break;case x.T__8:this.enterOuterAlt(t,3),this.state=105,this.return_expression(),this.state=106,this.match(x.T__0);break;case x.T__9:case x.T__10:case x.T__11:case x.T__12:case x.T__13:case x.T__14:case x.T__16:case x.T__20:case x.T__23:case x.T__32:case x.T__35:case x.T__36:case x.T__37:case x.T__43:case x.NUMBER:case x.IDENTIFIER:this.enterOuterAlt(t,4),this.state=108,this.expression(0),this.state=109,this.match(x.T__0);break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}constant_declaration(){let t=new y(this._ctx,this.state);this.enterRule(t,6,x.RULE_constant_declaration);try{this.enterOuterAlt(t,1),this.state=113,this.match(x.T__1),this.state=114,this.const_name(),this.state=115,this.match(x.T__2),this.state=116,this.type(),this.state=117,this.match(x.T__3),this.state=118,this.expression(0),this.state=119,this.match(x.T__0)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}variable_declaration(){let t,e=new g(this._ctx,this.state);this.enterRule(e,8,x.RULE_variable_declaration);try{this.enterOuterAlt(e,1),this.state=121,this.match(x.T__4),this.state=122,this.mutable(),this.state=123,this.var_name(),this.state=126,this._errHandler.sync(this),t=this._input.LA(1),t===x.T__2&&(this.state=124,this.match(x.T__2),this.state=125,this.type()),this.state=128,this.match(x.T__3),this.state=129,this.expression(0),this.state=130,this.match(x.T__0)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}mutable(){let t,e=new A(this._ctx,this.state);this.enterRule(e,10,x.RULE_mutable);try{this.enterOuterAlt(e,1),this.state=133,this._errHandler.sync(this),t=this._input.LA(1),t===x.T__5&&(this.state=132,this.match(x.T__5))}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}function_declaration(){let t=new b(this._ctx,this.state);this.enterRule(t,12,x.RULE_function_declaration);try{this.enterOuterAlt(t,1),this.state=135,this.match(x.T__6),this.state=136,this.function_name(),this.state=137,this.parameter_list(),this.state=138,this.match(x.T__7),this.state=139,this.type(),this.state=140,this.function_body()}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}return_expression(){let t=new w(this._ctx,this.state);this.enterRule(t,14,x.RULE_return_expression);try{this.enterOuterAlt(t,1),this.state=142,this.match(x.T__8),this.state=143,this.expression(0)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}expression(t){void 0===t&&(t=0);let e=this._ctx,r=this.state,i=new k(this._ctx,r),n=i;this.enterRecursionRule(i,16,x.RULE_expression,t);try{let t;switch(this.enterOuterAlt(i,1),this.state=159,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,5,this._ctx)){case 1:this.state=146,this.literal();break;case 2:this.state=147,this.name();break;case 3:this.state=148,this.refed_name();break;case 4:this.state=149,this.derefed_name();break;case 5:this.state=150,this.block();break;case 6:this.state=151,this.assignment();break;case 7:this.state=152,this.closure();break;case 8:this.state=153,this.unary_operator(),this.state=154,this.expression(4);break;case 9:this.state=156,this.function_application();break;case 10:this.state=157,this.parens_expression();break;case 11:this.state=158,this.if_expression()}for(this._ctx._stop=this._input.tryLT(-1),this.state=171,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,7,this._ctx);2!==t&&t!==u.ATN.INVALID_ALT_NUMBER;){if(1===t)switch(null!=this._parseListeners&&this.triggerExitRuleEvent(),n=i,this.state=169,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,6,this._ctx)){case 1:if(i=new k(e,r),this.pushNewRecursionContext(i,16,x.RULE_expression),this.state=161,!this.precpred(this._ctx,6))throw this.createFailedPredicateException("this.precpred(this._ctx, 6)");this.state=162,this.binary_operator(),this.state=163,this.expression(7);break;case 2:if(i=new k(e,r),this.pushNewRecursionContext(i,16,x.RULE_expression),this.state=165,!this.precpred(this._ctx,5))throw this.createFailedPredicateException("this.precpred(this._ctx, 5)");this.state=166,this.binary_logical_operator(),this.state=167,this.expression(6)}this.state=173,this._errHandler.sync(this),t=this.interpreter.adaptivePredict(this._input,7,this._ctx)}}catch(t){if(!(t instanceof f.RecognitionException))throw t;i.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.unrollRecursionContexts(e)}return i}refed_name(){let t=new L(this._ctx,this.state);this.enterRule(t,18,x.RULE_refed_name);try{switch(this.state=176,this._errHandler.sync(this),this._input.LA(1)){case x.T__9:this.enterOuterAlt(t,1),this.state=174,this.immutable_refed_name();break;case x.T__10:this.enterOuterAlt(t,2),this.state=175,this.mutable_refed_name();break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}immutable_refed_name(){let t=new C(this._ctx,this.state);this.enterRule(t,20,x.RULE_immutable_refed_name);try{switch(this.state=182,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,9,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=178,this.match(x.T__9),this.state=179,this.name();break;case 2:this.enterOuterAlt(t,2),this.state=180,this.match(x.T__9),this.state=181,this.refed_name()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}mutable_refed_name(){let t=new N(this._ctx,this.state);this.enterRule(t,22,x.RULE_mutable_refed_name);try{switch(this.state=188,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,10,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=184,this.match(x.T__10),this.state=185,this.name();break;case 2:this.enterOuterAlt(t,2),this.state=186,this.match(x.T__10),this.state=187,this.refed_name()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}derefed_name(){let t=new I(this._ctx,this.state);this.enterRule(t,24,x.RULE_derefed_name);try{switch(this.state=194,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,11,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=190,this.match(x.T__11),this.state=191,this.name();break;case 2:this.enterOuterAlt(t,2),this.state=192,this.match(x.T__11),this.state=193,this.derefed_name()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}assignment(){let t=new H(this._ctx,this.state);this.enterRule(t,26,x.RULE_assignment);try{switch(this.enterOuterAlt(t,1),this.state=198,this._errHandler.sync(this),this._input.LA(1)){case x.T__43:case x.IDENTIFIER:this.state=196,this.name();break;case x.T__11:this.state=197,this.derefed_name();break;default:throw new h.NoViableAltException(this)}this.state=200,this.match(x.T__3),this.state=201,this.expression(0)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}closure(){let t=new M(this._ctx,this.state);this.enterRule(t,28,x.RULE_closure);try{this.enterOuterAlt(t,1),this.state=203,this.closure_parameter_list(),this.state=204,this.match(x.T__7),this.state=205,this.type(),this.state=206,this.function_body()}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}closure_parameter_list(){let t=new P(this._ctx,this.state);this.enterRule(t,30,x.RULE_closure_parameter_list);try{switch(this.state=213,this._errHandler.sync(this),this._input.LA(1)){case x.T__12:this.enterOuterAlt(t,1),this.state=208,this.match(x.T__12);break;case x.T__13:this.enterOuterAlt(t,2),this.state=209,this.match(x.T__13),this.state=210,this.parameters(),this.state=211,this.match(x.T__13);break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}parens_expression(){let t=new O(this._ctx,this.state);this.enterRule(t,32,x.RULE_parens_expression);try{this.enterOuterAlt(t,1),this.state=215,this.match(x.T__14),this.state=216,this.expression(0),this.state=217,this.match(x.T__15)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}if_expression(){let t=new G(this._ctx,this.state);this.enterRule(t,34,x.RULE_if_expression);try{if(this.enterOuterAlt(t,1),this.state=219,this.match(x.T__16),this.state=220,this.cond_expr(),this.state=221,this.block(),this.state=227,this._errHandler.sync(this),1===this.interpreter.adaptivePredict(this._input,15,this._ctx))switch(this.state=222,this.match(x.T__17),this.state=225,this._errHandler.sync(this),this._input.LA(1)){case x.T__20:this.state=223,this.block();break;case x.T__16:this.state=224,this.if_expression();break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}cond_expr(){let t=new U(this._ctx,this.state);this.enterRule(t,36,x.RULE_cond_expr);try{this.enterOuterAlt(t,1),this.state=229,this.expression(0)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}args_list(){let t=new S(this._ctx,this.state);this.enterRule(t,38,x.RULE_args_list);try{switch(this.state=236,this._errHandler.sync(this),this._input.LA(1)){case x.T__18:this.enterOuterAlt(t,1),this.state=231,this.match(x.T__18);break;case x.T__14:this.enterOuterAlt(t,2),this.state=232,this.match(x.T__14),this.state=233,this.args(),this.state=234,this.match(x.T__15);break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}args(){let t,e=new D(this._ctx,this.state);this.enterRule(e,40,x.RULE_args);try{if(this.enterOuterAlt(e,1),this.state=246,this._errHandler.sync(this),t=this._input.LA(1),!(-32&t)&&1<<t&(1<<x.T__9|1<<x.T__10|1<<x.T__11|1<<x.T__12|1<<x.T__13|1<<x.T__14|1<<x.T__16|1<<x.T__20|1<<x.T__23)||!(t-33&-32)&&1<<t-33&(1<<x.T__32-33|1<<x.T__35-33|1<<x.T__36-33|1<<x.T__37-33|1<<x.T__43-33|1<<x.NUMBER-33|1<<x.IDENTIFIER-33))for(this.state=238,this.expression(0),this.state=243,this._errHandler.sync(this),t=this._input.LA(1);t===x.T__19;)this.state=239,this.match(x.T__19),this.state=240,this.expression(0),this.state=245,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}function_application(){let t=new F(this._ctx,this.state);this.enterRule(t,42,x.RULE_function_application);try{this.enterOuterAlt(t,1),this.state=248,this.function_name(),this.state=249,this.args_list()}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}block(){let t,e=new B(this._ctx,this.state);this.enterRule(e,44,x.RULE_block);try{let r;for(this.enterOuterAlt(e,1),this.state=251,this.match(x.T__20),this.state=255,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,19,this._ctx);2!==r&&r!==u.ATN.INVALID_ALT_NUMBER;)1===r&&(this.state=252,this.statement()),this.state=257,this._errHandler.sync(this),r=this.interpreter.adaptivePredict(this._input,19,this._ctx);this.state=259,this._errHandler.sync(this),t=this._input.LA(1),(!(-32&t)&&1<<t&(1<<x.T__9|1<<x.T__10|1<<x.T__11|1<<x.T__12|1<<x.T__13|1<<x.T__14|1<<x.T__16|1<<x.T__20|1<<x.T__23)||!(t-33&-32)&&1<<t-33&(1<<x.T__32-33|1<<x.T__35-33|1<<x.T__36-33|1<<x.T__37-33|1<<x.T__43-33|1<<x.NUMBER-33|1<<x.IDENTIFIER-33))&&(this.state=258,this.expression(0)),this.state=261,this.match(x.T__21)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}function_body(){let t=new V(this._ctx,this.state);this.enterRule(t,46,x.RULE_function_body);try{this.enterOuterAlt(t,1),this.state=263,this.block()}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}parameter_list(){let t=new $(this._ctx,this.state);this.enterRule(t,48,x.RULE_parameter_list);try{switch(this.state=270,this._errHandler.sync(this),this._input.LA(1)){case x.T__18:this.enterOuterAlt(t,1),this.state=265,this.match(x.T__18);break;case x.T__14:this.enterOuterAlt(t,2),this.state=266,this.match(x.T__14),this.state=267,this.parameters(),this.state=268,this.match(x.T__15);break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}parameter(){let t=new z(this._ctx,this.state);this.enterRule(t,50,x.RULE_parameter);try{this.enterOuterAlt(t,1),this.state=272,this.match(x.IDENTIFIER),this.state=273,this.match(x.T__2),this.state=274,this.type()}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}parameters(){let t,e=new q(this._ctx,this.state);this.enterRule(e,52,x.RULE_parameters);try{if(this.enterOuterAlt(e,1),this.state=284,this._errHandler.sync(this),t=this._input.LA(1),t===x.IDENTIFIER)for(this.state=276,this.parameter(),this.state=281,this._errHandler.sync(this),t=this._input.LA(1);t===x.T__19;)this.state=277,this.match(x.T__19),this.state=278,this.parameter(),this.state=283,this._errHandler.sync(this),t=this._input.LA(1)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}binary_operator(){let t,e=new W(this._ctx,this.state);this.enterRule(e,54,x.RULE_binary_operator);try{this.enterOuterAlt(e,1),this.state=286,t=this._input.LA(1),t-12&-32||!(1<<t-12&(1<<x.T__11-12|1<<x.T__22-12|1<<x.T__23-12|1<<x.T__24-12|1<<x.T__25-12|1<<x.T__26-12|1<<x.T__27-12|1<<x.T__28-12|1<<x.T__29-12|1<<x.T__30-12|1<<x.T__31-12))?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}unary_operator(){let t,e=new Y(this._ctx,this.state);this.enterRule(e,56,x.RULE_unary_operator);try{this.enterOuterAlt(e,1),this.state=288,t=this._input.LA(1),t!==x.T__23&&t!==x.T__32?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}binary_logical_operator(){let t,e=new K(this._ctx,this.state);this.enterRule(e,58,x.RULE_binary_logical_operator);try{this.enterOuterAlt(e,1),this.state=290,t=this._input.LA(1),t!==x.T__12&&t!==x.T__33?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}literal(){let t=new Q(this._ctx,this.state);this.enterRule(t,60,x.RULE_literal);try{switch(this.state=296,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,24,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=292,this.integer_literal();break;case 2:this.enterOuterAlt(t,2),this.state=293,this.float_literal();break;case 3:this.enterOuterAlt(t,3),this.state=294,this.boolean_literal();break;case 4:this.enterOuterAlt(t,4),this.state=295,this.string_literal()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}integer_literal(){let t=new J(this._ctx,this.state);this.enterRule(t,62,x.RULE_integer_literal);try{this.enterOuterAlt(t,1),this.state=298,this.match(x.NUMBER)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}float_literal(){let t=new X(this._ctx,this.state);this.enterRule(t,64,x.RULE_float_literal);try{this.enterOuterAlt(t,1),this.state=300,this.match(x.NUMBER),this.state=301,this.match(x.T__34),this.state=302,this.match(x.NUMBER)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}boolean_literal(){let t,e=new j(this._ctx,this.state);this.enterRule(e,66,x.RULE_boolean_literal);try{this.enterOuterAlt(e,1),this.state=304,t=this._input.LA(1),t!==x.T__35&&t!==x.T__36?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}string_literal(){let t,e=new Z(this._ctx,this.state);this.enterRule(e,68,x.RULE_string_literal);try{for(this.enterOuterAlt(e,1),this.state=306,this.match(x.T__37),this.state=310,this._errHandler.sync(this),t=this._input.LA(1);!(-32&t)&&1<<t&(1<<x.T__0|1<<x.T__1|1<<x.T__2|1<<x.T__3|1<<x.T__4|1<<x.T__5|1<<x.T__6|1<<x.T__7|1<<x.T__8|1<<x.T__9|1<<x.T__10|1<<x.T__11|1<<x.T__12|1<<x.T__13|1<<x.T__14|1<<x.T__15|1<<x.T__16|1<<x.T__17|1<<x.T__18|1<<x.T__19|1<<x.T__20|1<<x.T__21|1<<x.T__22|1<<x.T__23|1<<x.T__24|1<<x.T__25|1<<x.T__26|1<<x.T__27|1<<x.T__28|1<<x.T__29|1<<x.T__30)||!(t-32&-32)&&1<<t-32&(1<<x.T__31-32|1<<x.T__32-32|1<<x.T__33-32|1<<x.T__34-32|1<<x.T__35-32|1<<x.T__36-32|1<<x.T__39-32|1<<x.T__40-32|1<<x.T__41-32|1<<x.T__42-32|1<<x.T__43-32|1<<x.JUNK-32|1<<x.NUMBER-32|1<<x.IDENTIFIER-32);)this.state=307,this.string_characters(),this.state=312,this._errHandler.sync(this),t=this._input.LA(1);this.state=313,this.match(x.T__37)}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}string_characters(){let t,e=new tt(this._ctx,this.state);this.enterRule(e,70,x.RULE_string_characters);try{this.enterOuterAlt(e,1),this.state=315,t=this._input.LA(1),t<=0||t===x.T__37||t===x.T__38?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}type(){let t=new et(this._ctx,this.state);this.enterRule(t,72,x.RULE_type);try{switch(this.state=320,this._errHandler.sync(this),this._input.LA(1)){case x.T__18:case x.T__39:case x.T__40:case x.T__41:case x.T__42:this.enterOuterAlt(t,1),this.state=317,this.primitive_type();break;case x.T__9:this.enterOuterAlt(t,2),this.state=318,this.borrowed_type();break;case x.T__10:this.enterOuterAlt(t,3),this.state=319,this.borrowed_mutable_type();break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}primitive_type(){let t,e=new rt(this._ctx,this.state);this.enterRule(e,74,x.RULE_primitive_type);try{this.enterOuterAlt(e,1),this.state=322,t=this._input.LA(1),t-19&-32||!(1<<t-19&(1<<x.T__18-19|1<<x.T__39-19|1<<x.T__40-19|1<<x.T__41-19|1<<x.T__42-19))?this._errHandler.recoverInline(this):(this._input.LA(1)===v.Token.EOF&&(this.matchedEOF=!0),this._errHandler.reportMatch(this),this.consume())}catch(t){if(!(t instanceof f.RecognitionException))throw t;e.exception=t,this._errHandler.reportError(this,t),this._errHandler.recover(this,t)}finally{this.exitRule()}return e}borrowed_type(){let t=new it(this._ctx,this.state);this.enterRule(t,76,x.RULE_borrowed_type);try{switch(this.state=328,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,27,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=324,this.match(x.T__9),this.state=325,this.primitive_type();break;case 2:this.enterOuterAlt(t,2),this.state=326,this.match(x.T__9),this.state=327,this.type()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}borrowed_mutable_type(){let t=new nt(this._ctx,this.state);this.enterRule(t,78,x.RULE_borrowed_mutable_type);try{switch(this.state=334,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,28,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=330,this.match(x.T__10),this.state=331,this.primitive_type();break;case 2:this.enterOuterAlt(t,2),this.state=332,this.match(x.T__10),this.state=333,this.type()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}print_macro(){let t=new st(this._ctx,this.state);this.enterRule(t,80,x.RULE_print_macro);try{this.enterOuterAlt(t,1),this.state=336,this.match(x.T__43)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}name(){let t=new ot(this._ctx,this.state);this.enterRule(t,82,x.RULE_name);try{switch(this.state=342,this._errHandler.sync(this),this.interpreter.adaptivePredict(this._input,29,this._ctx)){case 1:this.enterOuterAlt(t,1),this.state=338,this.const_name();break;case 2:this.enterOuterAlt(t,2),this.state=339,this.var_name();break;case 3:this.enterOuterAlt(t,3),this.state=340,this.function_name();break;case 4:this.enterOuterAlt(t,4),this.state=341,this.print_macro()}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}const_name(){let t=new at(this._ctx,this.state);this.enterRule(t,84,x.RULE_const_name);try{this.enterOuterAlt(t,1),this.state=344,this.match(x.IDENTIFIER)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}var_name(){let t=new _t(this._ctx,this.state);this.enterRule(t,86,x.RULE_var_name);try{this.enterOuterAlt(t,1),this.state=346,this.match(x.IDENTIFIER)}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}function_name(){let t=new lt(this._ctx,this.state);this.enterRule(t,88,x.RULE_function_name);try{switch(this.state=350,this._errHandler.sync(this),this._input.LA(1)){case x.IDENTIFIER:this.enterOuterAlt(t,1),this.state=348,this.match(x.IDENTIFIER);break;case x.T__43:this.enterOuterAlt(t,2),this.state=349,this.print_macro();break;default:throw new h.NoViableAltException(this)}}catch(e){if(!(e instanceof f.RecognitionException))throw e;t.exception=e,this._errHandler.reportError(this,e),this._errHandler.recover(this,e)}finally{this.exitRule()}return t}sempred(t,e,r){return 8!==e||this.expression_sempred(t,r)}expression_sempred(t,e){switch(e){case 0:return this.precpred(this._ctx,6);case 1:return this.precpred(this._ctx,5)}return!0}static get _ATN(){return x.__ATN||(x.__ATN=(new n.ATNDeserializer).deserialize(_.toCharArray(x._serializedATN))),x.__ATN}}x.T__0=1,x.T__1=2,x.T__2=3,x.T__3=4,x.T__4=5,x.T__5=6,x.T__6=7,x.T__7=8,x.T__8=9,x.T__9=10,x.T__10=11,x.T__11=12,x.T__12=13,x.T__13=14,x.T__14=15,x.T__15=16,x.T__16=17,x.T__17=18,x.T__18=19,x.T__19=20,x.T__20=21,x.T__21=22,x.T__22=23,x.T__23=24,x.T__24=25,x.T__25=26,x.T__26=27,x.T__27=28,x.T__28=29,x.T__29=30,x.T__30=31,x.T__31=32,x.T__32=33,x.T__33=34,x.T__34=35,x.T__35=36,x.T__36=37,x.T__37=38,x.T__38=39,x.T__39=40,x.T__40=41,x.T__41=42,x.T__42=43,x.T__43=44,x.JUNK=45,x.NUMBER=46,x.IDENTIFIER=47,x.RULE_program=0,x.RULE_program_element=1,x.RULE_statement=2,x.RULE_constant_declaration=3,x.RULE_variable_declaration=4,x.RULE_mutable=5,x.RULE_function_declaration=6,x.RULE_return_expression=7,x.RULE_expression=8,x.RULE_refed_name=9,x.RULE_immutable_refed_name=10,x.RULE_mutable_refed_name=11,x.RULE_derefed_name=12,x.RULE_assignment=13,x.RULE_closure=14,x.RULE_closure_parameter_list=15,x.RULE_parens_expression=16,x.RULE_if_expression=17,x.RULE_cond_expr=18,x.RULE_args_list=19,x.RULE_args=20,x.RULE_function_application=21,x.RULE_block=22,x.RULE_function_body=23,x.RULE_parameter_list=24,x.RULE_parameter=25,x.RULE_parameters=26,x.RULE_binary_operator=27,x.RULE_unary_operator=28,x.RULE_binary_logical_operator=29,x.RULE_literal=30,x.RULE_integer_literal=31,x.RULE_float_literal=32,x.RULE_boolean_literal=33,x.RULE_string_literal=34,x.RULE_string_characters=35,x.RULE_type=36,x.RULE_primitive_type=37,x.RULE_borrowed_type=38,x.RULE_borrowed_mutable_type=39,x.RULE_print_macro=40,x.RULE_name=41,x.RULE_const_name=42,x.RULE_var_name=43,x.RULE_function_name=44,x.ruleNames=["program","program_element","statement","constant_declaration","variable_declaration","mutable","function_declaration","return_expression","expression","refed_name","immutable_refed_name","mutable_refed_name","derefed_name","assignment","closure","closure_parameter_list","parens_expression","if_expression","cond_expr","args_list","args","function_application","block","function_body","parameter_list","parameter","parameters","binary_operator","unary_operator","binary_logical_operator","literal","integer_literal","float_literal","boolean_literal","string_literal","string_characters","type","primitive_type","borrowed_type","borrowed_mutable_type","print_macro","name","const_name","var_name","function_name"],x._LITERAL_NAMES=[void 0,"';'","'const'","':'","'='","'let'","'mut'","'fn'","'->'","'return'","'&'","'&mut'","'*'","'||'","'|'","'('","')'","'if'","'else'","'()'","','","'{'","'}'","'+'","'-'","'/'","'%'","'=='","'!='","'<'","'>'","'<='","'>='","'!'","'&&'","'.'","'true'","'false'","'\"'","'\\'","'i32'","'f32'","'bool'","'str'","'println!'"],x._SYMBOLIC_NAMES=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"JUNK","NUMBER","IDENTIFIER"],x.VOCABULARY=new a.VocabularyImpl(x._LITERAL_NAMES,x._SYMBOLIC_NAMES,[]),x._serializedATN='ì¤ìªºÖê¾ºä½“Ø‡îª‹ì‰1Å£\t\t\t\t\t\t\b\t\b\t\t\t\n\t\n\v\t\v\f\t\f\r\t\r\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t !\t!"\t"#\t#$\t$%\t%&\t&\'\t\'(\t()\t)*\t*+\t+,\t,-\t-.\t._\n\fb\vh\nr\nÂ\nÂˆ\n\b\b\b\b\b\b\b\t\t\t\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nÂ¢\n\n\n\n\n\n\n\n\n\n\nÂ¬\n\n\f\n\nÂ¯\v\n\v\v\vÂ³\n\v\f\f\f\f\fÂ¹\n\f\r\r\r\r\rÂ¿\n\rÃ…\nÃ‰\nÃ˜\nÃ¤\nÃ¦\nÃ¯\nÃ´\n\fÃ·\vÃ¹\nÄ€\n\fÄƒ\vÄ†\nÄ‘\nÄš\n\fÄ\vÄŸ\n     Ä«\n !!""""##$$$Ä·\n$\f$$Äº\v$$$%%&&&&Åƒ\n&\'\'(((((Å‹\n()))))Å‘\n)**+++++Å™\n+,,--...Å¡\n../\b\n\f "$&(*,.02468:<>@BDFHJLNPRTVXZ\b"##$$&\'()*-Å¤\\gq\bs\n{\fÂ‡Â‰ÂÂ¡Â²Â¸Â¾Ã„ÃˆÃ Ã—"Ã™$Ã&Ã§(Ã®*Ã¸,Ãº.Ã½0Ä‰2Ä4Ä’6Ä8Ä :Ä¢<Ä¤>Äª@Ä¬BÄ®DÄ²FÄ´HÄ½JÅ‚LÅ„NÅŠPÅRÅ’TÅ˜VÅšXÅœZÅ \\`]_^]_b`^`aacb`cddeh\bfh\bgegfhir\bjr\nkl\tlmmrno\nopprqiqjqkqnrsttuV,uvvwJ&wxxy\nyzz\t{||}\f}Â€X-~ÂJ&Â€~Â€ÂÂÂ‚Â‚ÂƒÂƒÂ„\nÂ„Â…Â…\vÂ†Âˆ\bÂ‡Â†Â‡ÂˆÂˆ\rÂ‰ÂŠ\tÂŠÂ‹Z.Â‹ÂŒ2ÂŒÂ\nÂÂJ&ÂÂ0ÂÂÂ‘\vÂ‘Â’\nÂ’Â“Â”\b\nÂ”Â¢> Â•Â¢T+Â–Â¢\vÂ—Â¢Â˜Â¢.Â™Â¢ÂšÂ¢Â›Âœ:ÂœÂ\nÂÂ¢ÂÂ¢,ÂŸÂ¢"Â Â¢$Â¡Â“Â¡Â•Â¡Â–Â¡Â—Â¡Â˜Â¡Â™Â¡ÂšÂ¡Â›Â¡ÂÂ¡ÂŸÂ¡Â Â¢Â­Â£Â¤\f\bÂ¤Â¥8Â¥Â¦\n\tÂ¦Â¬Â§Â¨\fÂ¨Â©<Â©Âª\n\bÂªÂ¬Â«Â£Â«Â§Â¬Â¯Â­Â«Â­Â®Â®Â¯Â­Â°Â³\fÂ±Â³\rÂ²Â°Â²Â±Â³Â´Âµ\fÂµÂ¹T+Â¶Â·\fÂ·Â¹\vÂ¸Â´Â¸Â¶Â¹ÂºÂ»\rÂ»Â¿T+Â¼Â½\rÂ½Â¿\vÂ¾ÂºÂ¾Â¼Â¿Ã€ÃÃÃ…T+Ã‚ÃƒÃƒÃ…Ã„Ã€Ã„Ã‚Ã…Ã†Ã‰T+Ã‡Ã‰ÃˆÃ†ÃˆÃ‡Ã‰ÃŠÃŠÃ‹Ã‹ÃŒ\nÃŒÃÃ ÃÃ\nÃÃJ&ÃÃ‘0Ã‘Ã’Ã˜Ã“Ã”Ã”Ã•6Ã•Ã–Ã–Ã˜Ã—Ã’Ã—Ã“Ã˜!Ã™ÃšÃšÃ›\nÃ›ÃœÃœ#ÃÃÃÃŸ&ÃŸÃ¥.Ã Ã£Ã¡Ã¤.Ã¢Ã¤$Ã£Ã¡Ã£Ã¢Ã¤Ã¦Ã¥Ã Ã¥Ã¦Ã¦%Ã§Ã¨\nÃ¨\'Ã©Ã¯ÃªÃ«Ã«Ã¬*Ã¬Ã­Ã­Ã¯Ã®Ã©Ã®ÃªÃ¯)Ã°Ãµ\nÃ±Ã²Ã²Ã´\nÃ³Ã±Ã´Ã·ÃµÃ³ÃµÃ¶Ã¶Ã¹Ã·ÃµÃ¸Ã°Ã¸Ã¹Ã¹+ÃºÃ»Z.Ã»Ã¼(Ã¼-Ã½ÄÃ¾Ä€Ã¿Ã¾Ä€ÄƒÄÃ¿ÄÄ‚Ä‚Ä…ÄƒÄÄ„Ä†\nÄ…Ä„Ä…Ä†Ä†Ä‡Ä‡ÄˆÄˆ/Ä‰ÄŠ.ÄŠ1Ä‹Ä‘ÄŒÄÄÄ6ÄÄÄÄ‘ÄÄ‹ÄÄŒÄ‘3Ä’Ä“1Ä“Ä”Ä”Ä•J&Ä•5Ä–Ä›4Ä—Ä˜Ä˜Äš4Ä™Ä—ÄšÄÄ›Ä™Ä›ÄœÄœÄŸÄÄ›ÄÄ–ÄÄŸÄŸ7Ä Ä¡\tÄ¡9Ä¢Ä£\tÄ£;Ä¤Ä¥\tÄ¥=Ä¦Ä«@!Ä§Ä«B"Ä¨Ä«D#Ä©Ä«F$ÄªÄ¦ÄªÄ§ÄªÄ¨ÄªÄ©Ä«?Ä¬Ä­0Ä­AÄ®Ä¯0Ä¯Ä°%Ä°Ä±0Ä±CÄ²Ä³\tÄ³EÄ´Ä¸(ÄµÄ·H%Ä¶ÄµÄ·ÄºÄ¸Ä¶Ä¸Ä¹Ä¹Ä»ÄºÄ¸Ä»Ä¼(Ä¼GÄ½Ä¾\nÄ¾IÄ¿ÅƒL\'Å€ÅƒN(ÅÅƒP)Å‚Ä¿Å‚Å€Å‚ÅÅƒKÅ„Å…\tÅ…MÅ†Å‡\fÅ‡Å‹L\'ÅˆÅ‰\fÅ‰Å‹J&ÅŠÅ†ÅŠÅˆÅ‹OÅŒÅ\rÅÅ‘L\'ÅÅ\rÅÅ‘J&ÅÅŒÅÅÅ‘QÅ’Å“.Å“SÅ”Å™V,Å•Å™X-Å–Å™Z.Å—Å™R*Å˜Å”Å˜Å•Å˜Å–Å˜Å—Å™UÅšÅ›1Å›WÅœÅ1ÅYÅÅ¡1ÅŸÅ¡R*Å ÅÅ ÅŸÅ¡[!`gqÂ€Â‡Â¡Â«Â­Â²Â¸Â¾Ã„ÃˆÃ—Ã£Ã¥Ã®ÃµÃ¸ÄÄ…ÄÄ›ÄÄªÄ¸Å‚ÅŠÅÅ˜Å ';class T extends d.ParserRuleContext{program_element(t){return void 0===t?this.getRuleContexts(R):this.getRuleContext(t,R)}EOF(){return this.getToken(x.EOF,0)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_program}enterRule(t){t.enterProgram&&t.enterProgram(this)}exitRule(t){t.exitProgram&&t.exitProgram(this)}accept(t){return t.visitProgram?t.visitProgram(this):t.visitChildren(this)}}class R extends d.ParserRuleContext{constant_declaration(){return this.tryGetRuleContext(0,y)}function_declaration(){return this.tryGetRuleContext(0,b)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_program_element}enterRule(t){t.enterProgram_element&&t.enterProgram_element(this)}exitRule(t){t.exitProgram_element&&t.exitProgram_element(this)}accept(t){return t.visitProgram_element?t.visitProgram_element(this):t.visitChildren(this)}}class E extends d.ParserRuleContext{constant_declaration(){return this.tryGetRuleContext(0,y)}variable_declaration(){return this.tryGetRuleContext(0,g)}return_expression(){return this.tryGetRuleContext(0,w)}expression(){return this.tryGetRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_statement}enterRule(t){t.enterStatement&&t.enterStatement(this)}exitRule(t){t.exitStatement&&t.exitStatement(this)}accept(t){return t.visitStatement?t.visitStatement(this):t.visitChildren(this)}}class y extends d.ParserRuleContext{const_name(){return this.getRuleContext(0,at)}type(){return this.getRuleContext(0,et)}expression(){return this.getRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_constant_declaration}enterRule(t){t.enterConstant_declaration&&t.enterConstant_declaration(this)}exitRule(t){t.exitConstant_declaration&&t.exitConstant_declaration(this)}accept(t){return t.visitConstant_declaration?t.visitConstant_declaration(this):t.visitChildren(this)}}class g extends d.ParserRuleContext{mutable(){return this.getRuleContext(0,A)}var_name(){return this.getRuleContext(0,_t)}expression(){return this.getRuleContext(0,k)}type(){return this.tryGetRuleContext(0,et)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_variable_declaration}enterRule(t){t.enterVariable_declaration&&t.enterVariable_declaration(this)}exitRule(t){t.exitVariable_declaration&&t.exitVariable_declaration(this)}accept(t){return t.visitVariable_declaration?t.visitVariable_declaration(this):t.visitChildren(this)}}class A extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_mutable}enterRule(t){t.enterMutable&&t.enterMutable(this)}exitRule(t){t.exitMutable&&t.exitMutable(this)}accept(t){return t.visitMutable?t.visitMutable(this):t.visitChildren(this)}}class b extends d.ParserRuleContext{function_name(){return this.getRuleContext(0,lt)}parameter_list(){return this.getRuleContext(0,$)}type(){return this.getRuleContext(0,et)}function_body(){return this.getRuleContext(0,V)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_function_declaration}enterRule(t){t.enterFunction_declaration&&t.enterFunction_declaration(this)}exitRule(t){t.exitFunction_declaration&&t.exitFunction_declaration(this)}accept(t){return t.visitFunction_declaration?t.visitFunction_declaration(this):t.visitChildren(this)}}class w extends d.ParserRuleContext{expression(){return this.getRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_return_expression}enterRule(t){t.enterReturn_expression&&t.enterReturn_expression(this)}exitRule(t){t.exitReturn_expression&&t.exitReturn_expression(this)}accept(t){return t.visitReturn_expression?t.visitReturn_expression(this):t.visitChildren(this)}}class k extends d.ParserRuleContext{literal(){return this.tryGetRuleContext(0,Q)}name(){return this.tryGetRuleContext(0,ot)}refed_name(){return this.tryGetRuleContext(0,L)}derefed_name(){return this.tryGetRuleContext(0,I)}block(){return this.tryGetRuleContext(0,B)}assignment(){return this.tryGetRuleContext(0,H)}closure(){return this.tryGetRuleContext(0,M)}expression(t){return void 0===t?this.getRuleContexts(k):this.getRuleContext(t,k)}binary_operator(){return this.tryGetRuleContext(0,W)}binary_logical_operator(){return this.tryGetRuleContext(0,K)}unary_operator(){return this.tryGetRuleContext(0,Y)}function_application(){return this.tryGetRuleContext(0,F)}parens_expression(){return this.tryGetRuleContext(0,O)}if_expression(){return this.tryGetRuleContext(0,G)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_expression}enterRule(t){t.enterExpression&&t.enterExpression(this)}exitRule(t){t.exitExpression&&t.exitExpression(this)}accept(t){return t.visitExpression?t.visitExpression(this):t.visitChildren(this)}}class L extends d.ParserRuleContext{immutable_refed_name(){return this.tryGetRuleContext(0,C)}mutable_refed_name(){return this.tryGetRuleContext(0,N)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_refed_name}enterRule(t){t.enterRefed_name&&t.enterRefed_name(this)}exitRule(t){t.exitRefed_name&&t.exitRefed_name(this)}accept(t){return t.visitRefed_name?t.visitRefed_name(this):t.visitChildren(this)}}class C extends d.ParserRuleContext{name(){return this.tryGetRuleContext(0,ot)}refed_name(){return this.tryGetRuleContext(0,L)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_immutable_refed_name}enterRule(t){t.enterImmutable_refed_name&&t.enterImmutable_refed_name(this)}exitRule(t){t.exitImmutable_refed_name&&t.exitImmutable_refed_name(this)}accept(t){return t.visitImmutable_refed_name?t.visitImmutable_refed_name(this):t.visitChildren(this)}}class N extends d.ParserRuleContext{name(){return this.tryGetRuleContext(0,ot)}refed_name(){return this.tryGetRuleContext(0,L)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_mutable_refed_name}enterRule(t){t.enterMutable_refed_name&&t.enterMutable_refed_name(this)}exitRule(t){t.exitMutable_refed_name&&t.exitMutable_refed_name(this)}accept(t){return t.visitMutable_refed_name?t.visitMutable_refed_name(this):t.visitChildren(this)}}class I extends d.ParserRuleContext{name(){return this.tryGetRuleContext(0,ot)}derefed_name(){return this.tryGetRuleContext(0,I)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_derefed_name}enterRule(t){t.enterDerefed_name&&t.enterDerefed_name(this)}exitRule(t){t.exitDerefed_name&&t.exitDerefed_name(this)}accept(t){return t.visitDerefed_name?t.visitDerefed_name(this):t.visitChildren(this)}}class H extends d.ParserRuleContext{expression(){return this.getRuleContext(0,k)}name(){return this.tryGetRuleContext(0,ot)}derefed_name(){return this.tryGetRuleContext(0,I)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_assignment}enterRule(t){t.enterAssignment&&t.enterAssignment(this)}exitRule(t){t.exitAssignment&&t.exitAssignment(this)}accept(t){return t.visitAssignment?t.visitAssignment(this):t.visitChildren(this)}}class M extends d.ParserRuleContext{closure_parameter_list(){return this.getRuleContext(0,P)}type(){return this.getRuleContext(0,et)}function_body(){return this.getRuleContext(0,V)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_closure}enterRule(t){t.enterClosure&&t.enterClosure(this)}exitRule(t){t.exitClosure&&t.exitClosure(this)}accept(t){return t.visitClosure?t.visitClosure(this):t.visitChildren(this)}}class P extends d.ParserRuleContext{parameters(){return this.tryGetRuleContext(0,q)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_closure_parameter_list}enterRule(t){t.enterClosure_parameter_list&&t.enterClosure_parameter_list(this)}exitRule(t){t.exitClosure_parameter_list&&t.exitClosure_parameter_list(this)}accept(t){return t.visitClosure_parameter_list?t.visitClosure_parameter_list(this):t.visitChildren(this)}}class O extends d.ParserRuleContext{expression(){return this.getRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_parens_expression}enterRule(t){t.enterParens_expression&&t.enterParens_expression(this)}exitRule(t){t.exitParens_expression&&t.exitParens_expression(this)}accept(t){return t.visitParens_expression?t.visitParens_expression(this):t.visitChildren(this)}}class G extends d.ParserRuleContext{cond_expr(){return this.getRuleContext(0,U)}block(t){return void 0===t?this.getRuleContexts(B):this.getRuleContext(t,B)}if_expression(){return this.tryGetRuleContext(0,G)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_if_expression}enterRule(t){t.enterIf_expression&&t.enterIf_expression(this)}exitRule(t){t.exitIf_expression&&t.exitIf_expression(this)}accept(t){return t.visitIf_expression?t.visitIf_expression(this):t.visitChildren(this)}}class U extends d.ParserRuleContext{expression(){return this.getRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_cond_expr}enterRule(t){t.enterCond_expr&&t.enterCond_expr(this)}exitRule(t){t.exitCond_expr&&t.exitCond_expr(this)}accept(t){return t.visitCond_expr?t.visitCond_expr(this):t.visitChildren(this)}}class S extends d.ParserRuleContext{args(){return this.tryGetRuleContext(0,D)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_args_list}enterRule(t){t.enterArgs_list&&t.enterArgs_list(this)}exitRule(t){t.exitArgs_list&&t.exitArgs_list(this)}accept(t){return t.visitArgs_list?t.visitArgs_list(this):t.visitChildren(this)}}class D extends d.ParserRuleContext{expression(t){return void 0===t?this.getRuleContexts(k):this.getRuleContext(t,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_args}enterRule(t){t.enterArgs&&t.enterArgs(this)}exitRule(t){t.exitArgs&&t.exitArgs(this)}accept(t){return t.visitArgs?t.visitArgs(this):t.visitChildren(this)}}class F extends d.ParserRuleContext{function_name(){return this.getRuleContext(0,lt)}args_list(){return this.getRuleContext(0,S)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_function_application}enterRule(t){t.enterFunction_application&&t.enterFunction_application(this)}exitRule(t){t.exitFunction_application&&t.exitFunction_application(this)}accept(t){return t.visitFunction_application?t.visitFunction_application(this):t.visitChildren(this)}}class B extends d.ParserRuleContext{statement(t){return void 0===t?this.getRuleContexts(E):this.getRuleContext(t,E)}expression(){return this.tryGetRuleContext(0,k)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_block}enterRule(t){t.enterBlock&&t.enterBlock(this)}exitRule(t){t.exitBlock&&t.exitBlock(this)}accept(t){return t.visitBlock?t.visitBlock(this):t.visitChildren(this)}}class V extends d.ParserRuleContext{block(){return this.getRuleContext(0,B)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_function_body}enterRule(t){t.enterFunction_body&&t.enterFunction_body(this)}exitRule(t){t.exitFunction_body&&t.exitFunction_body(this)}accept(t){return t.visitFunction_body?t.visitFunction_body(this):t.visitChildren(this)}}class $ extends d.ParserRuleContext{parameters(){return this.tryGetRuleContext(0,q)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_parameter_list}enterRule(t){t.enterParameter_list&&t.enterParameter_list(this)}exitRule(t){t.exitParameter_list&&t.exitParameter_list(this)}accept(t){return t.visitParameter_list?t.visitParameter_list(this):t.visitChildren(this)}}class z extends d.ParserRuleContext{IDENTIFIER(){return this.getToken(x.IDENTIFIER,0)}type(){return this.getRuleContext(0,et)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_parameter}enterRule(t){t.enterParameter&&t.enterParameter(this)}exitRule(t){t.exitParameter&&t.exitParameter(this)}accept(t){return t.visitParameter?t.visitParameter(this):t.visitChildren(this)}}class q extends d.ParserRuleContext{parameter(t){return void 0===t?this.getRuleContexts(z):this.getRuleContext(t,z)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_parameters}enterRule(t){t.enterParameters&&t.enterParameters(this)}exitRule(t){t.exitParameters&&t.exitParameters(this)}accept(t){return t.visitParameters?t.visitParameters(this):t.visitChildren(this)}}class W extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_binary_operator}enterRule(t){t.enterBinary_operator&&t.enterBinary_operator(this)}exitRule(t){t.exitBinary_operator&&t.exitBinary_operator(this)}accept(t){return t.visitBinary_operator?t.visitBinary_operator(this):t.visitChildren(this)}}class Y extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_unary_operator}enterRule(t){t.enterUnary_operator&&t.enterUnary_operator(this)}exitRule(t){t.exitUnary_operator&&t.exitUnary_operator(this)}accept(t){return t.visitUnary_operator?t.visitUnary_operator(this):t.visitChildren(this)}}class K extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_binary_logical_operator}enterRule(t){t.enterBinary_logical_operator&&t.enterBinary_logical_operator(this)}exitRule(t){t.exitBinary_logical_operator&&t.exitBinary_logical_operator(this)}accept(t){return t.visitBinary_logical_operator?t.visitBinary_logical_operator(this):t.visitChildren(this)}}class Q extends d.ParserRuleContext{integer_literal(){return this.tryGetRuleContext(0,J)}float_literal(){return this.tryGetRuleContext(0,X)}boolean_literal(){return this.tryGetRuleContext(0,j)}string_literal(){return this.tryGetRuleContext(0,Z)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_literal}enterRule(t){t.enterLiteral&&t.enterLiteral(this)}exitRule(t){t.exitLiteral&&t.exitLiteral(this)}accept(t){return t.visitLiteral?t.visitLiteral(this):t.visitChildren(this)}}class J extends d.ParserRuleContext{NUMBER(){return this.getToken(x.NUMBER,0)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_integer_literal}enterRule(t){t.enterInteger_literal&&t.enterInteger_literal(this)}exitRule(t){t.exitInteger_literal&&t.exitInteger_literal(this)}accept(t){return t.visitInteger_literal?t.visitInteger_literal(this):t.visitChildren(this)}}class X extends d.ParserRuleContext{NUMBER(t){return void 0===t?this.getTokens(x.NUMBER):this.getToken(x.NUMBER,t)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_float_literal}enterRule(t){t.enterFloat_literal&&t.enterFloat_literal(this)}exitRule(t){t.exitFloat_literal&&t.exitFloat_literal(this)}accept(t){return t.visitFloat_literal?t.visitFloat_literal(this):t.visitChildren(this)}}class j extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_boolean_literal}enterRule(t){t.enterBoolean_literal&&t.enterBoolean_literal(this)}exitRule(t){t.exitBoolean_literal&&t.exitBoolean_literal(this)}accept(t){return t.visitBoolean_literal?t.visitBoolean_literal(this):t.visitChildren(this)}}class Z extends d.ParserRuleContext{string_characters(t){return void 0===t?this.getRuleContexts(tt):this.getRuleContext(t,tt)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_string_literal}enterRule(t){t.enterString_literal&&t.enterString_literal(this)}exitRule(t){t.exitString_literal&&t.exitString_literal(this)}accept(t){return t.visitString_literal?t.visitString_literal(this):t.visitChildren(this)}}class tt extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_string_characters}enterRule(t){t.enterString_characters&&t.enterString_characters(this)}exitRule(t){t.exitString_characters&&t.exitString_characters(this)}accept(t){return t.visitString_characters?t.visitString_characters(this):t.visitChildren(this)}}class et extends d.ParserRuleContext{primitive_type(){return this.tryGetRuleContext(0,rt)}borrowed_type(){return this.tryGetRuleContext(0,it)}borrowed_mutable_type(){return this.tryGetRuleContext(0,nt)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_type}enterRule(t){t.enterType&&t.enterType(this)}exitRule(t){t.exitType&&t.exitType(this)}accept(t){return t.visitType?t.visitType(this):t.visitChildren(this)}}class rt extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_primitive_type}enterRule(t){t.enterPrimitive_type&&t.enterPrimitive_type(this)}exitRule(t){t.exitPrimitive_type&&t.exitPrimitive_type(this)}accept(t){return t.visitPrimitive_type?t.visitPrimitive_type(this):t.visitChildren(this)}}class it extends d.ParserRuleContext{primitive_type(){return this.tryGetRuleContext(0,rt)}type(){return this.tryGetRuleContext(0,et)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_borrowed_type}enterRule(t){t.enterBorrowed_type&&t.enterBorrowed_type(this)}exitRule(t){t.exitBorrowed_type&&t.exitBorrowed_type(this)}accept(t){return t.visitBorrowed_type?t.visitBorrowed_type(this):t.visitChildren(this)}}class nt extends d.ParserRuleContext{primitive_type(){return this.tryGetRuleContext(0,rt)}type(){return this.tryGetRuleContext(0,et)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_borrowed_mutable_type}enterRule(t){t.enterBorrowed_mutable_type&&t.enterBorrowed_mutable_type(this)}exitRule(t){t.exitBorrowed_mutable_type&&t.exitBorrowed_mutable_type(this)}accept(t){return t.visitBorrowed_mutable_type?t.visitBorrowed_mutable_type(this):t.visitChildren(this)}}class st extends d.ParserRuleContext{constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_print_macro}enterRule(t){t.enterPrint_macro&&t.enterPrint_macro(this)}exitRule(t){t.exitPrint_macro&&t.exitPrint_macro(this)}accept(t){return t.visitPrint_macro?t.visitPrint_macro(this):t.visitChildren(this)}}class ot extends d.ParserRuleContext{const_name(){return this.tryGetRuleContext(0,at)}var_name(){return this.tryGetRuleContext(0,_t)}function_name(){return this.tryGetRuleContext(0,lt)}print_macro(){return this.tryGetRuleContext(0,st)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_name}enterRule(t){t.enterName&&t.enterName(this)}exitRule(t){t.exitName&&t.exitName(this)}accept(t){return t.visitName?t.visitName(this):t.visitChildren(this)}}class at extends d.ParserRuleContext{IDENTIFIER(){return this.getToken(x.IDENTIFIER,0)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_const_name}enterRule(t){t.enterConst_name&&t.enterConst_name(this)}exitRule(t){t.exitConst_name&&t.exitConst_name(this)}accept(t){return t.visitConst_name?t.visitConst_name(this):t.visitChildren(this)}}class _t extends d.ParserRuleContext{IDENTIFIER(){return this.getToken(x.IDENTIFIER,0)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_var_name}enterRule(t){t.enterVar_name&&t.enterVar_name(this)}exitRule(t){t.exitVar_name&&t.exitVar_name(this)}accept(t){return t.visitVar_name?t.visitVar_name(this):t.visitChildren(this)}}class lt extends d.ParserRuleContext{IDENTIFIER(){return this.tryGetToken(x.IDENTIFIER,0)}print_macro(){return this.tryGetRuleContext(0,st)}constructor(t,e){super(t,e)}get ruleIndex(){return x.RULE_function_name}enterRule(t){t.enterFunction_name&&t.enterFunction_name(this)}exitRule(t){t.exitFunction_name&&t.exitFunction_name(this)}accept(t){return t.visitFunction_name?t.visitFunction_name(this):t.visitChildren(this)}}var ut=r(5585),ct=r(5606);const ht=t=>t?console.log:()=>{};function pt(t,e){return!!t[t.length-1].has(e)}function dt(t,e){for(let r=t.length-1;r>=0;r--)if(t[r].has(e))return!0;return!1}function mt(t,e){for(let r=t.length-1;r>=0;r--)if(t[r].has(e))return t[r].get(e)}function ft(t,e,r){t[t.length-1].set(e,r)}class vt extends Error{constructor(t,e){super("Line "+t+": "+e),this.name="SyntaxError"}}class xt extends Error{constructor(t,e){super("Line "+t+": "+e),this.name="SemanticError"}}class Tt extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.rule_name="Syntax",this.print_fn=ht(t)}defaultResult(){return{ok:!0,value:!0}}aggregateResult(t,e){return t.ok?e.ok?t&&e:e:t}visitErrorNode(t){return this.print_fn("Visiting error node"),{ok:!1,error:new vt(t.symbol.line,t.text+" at column "+t.symbol.charPositionInLine+" is not allowed")}}}class Rt extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.rule_name="Syntax",this.print_fn=ht(t),this.rule_validator=new Tt(t)}defaultResult(){return!0}aggregateResult(t,e){return t&&e}visitProgram(t){this.print_fn("Visiting program");const e=this.rule_validator.visit(t);return e.ok?(this.print_fn("Syntax is legal"),!0):(console.error(e.error),!1)}}class Et extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.rule_name="Entrypoint",this.print_fn=ht(t)}defaultResult(){return!0}aggregateResult(t,e){return t&&e}visitProgram(t){var e,r;this.print_fn("Visiting program");const i=t.program_element().map((t=>t.function_declaration())).filter((t=>void 0!==t)).filter((t=>"main"===t.function_name().text));if(0===i.length)return this.print_fn("No main function found"),console.error("SyntaxError: Rust programs require a main function!"),!1;if(i.length>1)return console.error("SyntaxError: Rust programs can only have one main function. Found ",i.length),!1;const n=i[0];return void 0!==(null===(r=null===(e=n.parameter_list())||void 0===e?void 0:e.parameters())||void 0===r?void 0:r.parameter())?(console.error("SyntaxError: main function should not have parameters"),!1):!("()"!==n.type().text&&(console.error("SyntaxError: main function should have return type (). Got ",n.type().text," instead"),1))}}var yt;!function(t){t.i32="i32",t.i64="i64",t.f32="f32",t.f64="f64",t.empty="()",t.bool="bool",t.string="string",t.function="function",t.integer_literal="integer",t.float_literal="float",t.unit="unit",t.unknown="unknown"}(yt||(yt={}));class gt{constructor(t){this.type=t}}class At{constructor(t){this.type=t}}function bt(t){return new gt(t)}function wt(t){return t instanceof gt}function kt(t){return t instanceof gt&&t.type instanceof At?t.type.type:t instanceof gt?t.type:t}class Lt{constructor(t,e=void 0,r=!1){this.type=t,this.value=e,this.is_mutable=r}equals(t){return this.type===t.type&&this.value===t.value&&this.is_mutable===t.is_mutable}toString(){return this.type+(this.value?"<"+this.value+">":"")}}function Ct(t){return t.startsWith("&mut")?new gt(new At(Ct(t.slice(4).trim()))):t.startsWith("&")?new gt(Ct(t.slice(1))):function(t){return"i32"===t?yt.i32:"i64"===t?yt.i64:"f32"===t?yt.f32:"f64"===t?yt.f64:"bool"===t?yt.bool:"str"===t?yt.string:"function"===t?yt.function:"()"===t?yt.empty:"integer_literal"===t?yt.integer_literal:"float_literal"===t?yt.float_literal:"..."===t?yt.unit:yt.unknown}(t)}function Nt(t){return t instanceof gt?t.type instanceof At?"&mut "+Nt(t.type.type):"&"+Nt(t.type):t}function It(t){return t===yt.i32||t===yt.i64||t===yt.integer_literal}function Ht(t,e){return t===yt.integer_literal?It(e):t===yt.float_literal?Mt(e):Nt(t)===Nt(e)}function Mt(t){return t===yt.f32||t===yt.f64||t===yt.float_literal}function Pt(t){return t===yt.bool}function Ot(t){return"=="===t||"!="===t||"<"===t||">"===t||"<="===t||">="===t}const Gt=(t,e,r)=>{if(t){console.log(e);for(let t=0;t<r.length;t++)console.log("\tScope ",t,": ",(i=r[t],"{"+Array.from(i).map((([t,e])=>t+": "+e)).join(", ")+"}"))}var i},Ut=new Lt(yt.empty);class St extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.debug_mode=t,this.scope=[],this.print_fn=ht(t)}defaultResult(){return{ok:!0,value:!0}}aggregateResult(t,e){return t.ok?e.ok?t&&e:e:t}visitProgram(t){return this.print_fn("Visiting program -> Initialising scope"),this.scope=[new Map],ft(this.scope,"println!",new Lt(yt.function,"<...> -> ()")),this.visitChildren(t)}visitBlock(t){this.print_fn("Visiting block -> Creating new scope"),this.scope.push(new Map);const e=this.visitChildren(t);return this.scope.pop(),e}visitConstant_declaration(t){this.print_fn("Visiting constant_declaration");const e=t.const_name().text,r=Ut;return pt(this.scope,e)?(this.print_fn("Error: constant name '",e,"' already declared in this scope"),{ok:!1,error:new xt(t.start.line,"Constant name '"+e+"' already declared in this scope")}):(ft(this.scope,e,r),Gt(this.debug_mode,"Current scope",this.scope),this.visitChildren(t))}visitVariable_declaration(t){this.print_fn("Visiting variable_declaration");const e=t.var_name().text,r=Ut;return pt(this.scope,e)?(this.print_fn("Error: variable name '",e,"' already declared in this scope"),{ok:!1,error:new xt(t.start.line,"Variable name '"+e+"' already declared in this scope")}):(ft(this.scope,e,r),Gt(this.debug_mode,"Current scope",this.scope),this.visitChildren(t))}visitFunction_declaration(t){this.print_fn("Visiting function_declaration");const e=t.function_name().text,r=Ut;if(pt(this.scope,e))return this.print_fn("Error: function name '",e,"' already declared in this scope"),{ok:!1,error:new xt(t.start.line,"Function name '"+e+"' already declared in this scope")};ft(this.scope,e,r),Gt(this.debug_mode,"Current scope",this.scope),this.print_fn("Creating new scope for function parameters"),this.scope.push(new Map);const i=this.visitChildren(t);return this.scope.pop(),i}visitClosure(t){this.print_fn("Visiting closure"),this.print_fn("Creating new scope for closure parameters"),this.scope.push(new Map);const e=this.visitChildren(t);return this.scope.pop(),e}visitClosure_parameter_list(t){return this.print_fn("Visiting closure's parameter_list"),this.visitParameter_list(t)}visitParameter_list(t){this.print_fn("Visiting parameter_list");const e=t.parameters();if(void 0!==e){const r=e.parameter();for(const e of r){const r=e.IDENTIFIER().text,i=Ut;if(pt(this.scope,r))return this.print_fn("Error: parameter name '",r,"' already declared in this scope"),{ok:!1,error:new xt(t.start.line,"Parameter name '"+r+"' already declared in this scope")};ft(this.scope,r,i)}}return Gt(this.debug_mode,"Current scope",this.scope),this.visitChildren(t)}visitExpression(t){if(this.print_fn("Visiting expression"),void 0!==t.literal())return{ok:!0,value:!0};const e=t.name();if(void 0!==e){const r=e.text;return dt(this.scope,r)?{ok:!0,value:!0}:(this.print_fn("Error: name '",r,"' not declared in this scope"),{ok:!1,error:new xt(t.start.line,"Name '"+r+"' not declared in this scope")})}return this.visitChildren(t)}visitFunction_application(t){this.print_fn("Visiting function_application");const e=t.function_name().text;return dt(this.scope,e)?this.visitChildren(t):(this.print_fn("Error: function '",e,"' not declared in this scope"),{ok:!1,error:new xt(t.start.line,"Function '"+e+"' not declared in this scope")})}}class Dt extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.rule_name="NoDoubleDeclare + DeclareBeforeUse",this.print_fn=ht(t),this.rule_validator=new St(t)}defaultResult(){return!0}aggregateResult(t,e){return t&&e}visitProgram(t){this.print_fn("Visiting program");const e=this.rule_validator.visit(t);return e.ok?(this.print_fn("Declarations are legal"),!0):(console.error(e.error),!1)}}class Ft extends Error{constructor(t,e){super(`Line ${e}: ${t}`),this.name="TypeError"}}function Bt(t,e){let r,i=1;if(void 0!==t||void 0!==e){if(void 0!==e){let t=e;for(;;){i++;const e=t.derefed_name();if(void 0===e){r=t.name();break}t=e}}else r=t;return void 0===r?void 0:{name:r,num_deref:i}}}class Vt extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.debug_mode=t,this.scope=[],this.return_types=[],this.block_results=[],this.print_fn=ht(t)}defaultResult(){return{ok:!0,value:new Lt(yt.unknown)}}aggregateResult(t,e){return t.ok?e.ok?{ok:!0,value:e.value}:e:t}visitProgram(t){return this.print_fn("Checking program type"),this.scope=[new Map],ft(this.scope,"println!",new Lt(yt.function,"<...> -> ()")),this.visitChildren(t)}visitReturn_expression(t){this.print_fn("Checking return expression type");const e=this.visitExpression(t.expression());if(!e.ok)return e;const r=e.value;return this.return_types[this.return_types.length-1].push(r),{ok:!0,value:new Lt(yt.empty,"")}}visitStatement(t){const e=t.constant_declaration();if(void 0!==e)return this.visitConstant_declaration(e);const r=t.variable_declaration();if(void 0!==r)return this.visitVariable_declaration(r);const i=t.return_expression();if(void 0!==i)return this.visitReturn_expression(i);const n=t.expression();return void 0!==n?this.visitExpression(n):{ok:!1,error:new Ft(`unknown statement type ${t.text}`,t.start.line)}}visitBlock(t){this.print_fn("Checking block type: ",t.text),this.scope.push(new Map),this.return_types.push([]);const e=t.statement().map((t=>this.visit(t))).filter((t=>!t.ok));if(e.length>0)return e[0];const r=this.return_types.pop();if(void 0===r)return{ok:!1,error:new Ft("return types is undefined. This is a bug in the TypeValidator!",t.start.line)};if(r.length>0){const e=r[0];if(!r.every((t=>Ht(t.type,e.type))))return this.print_fn("Failed return types: ",r),{ok:!1,error:new Ft(`all return types in block must be the same but got ${r}`,t.start.line)}}const i=t.expression(),n={ok:!0,value:new Lt(yt.empty)},s=void 0===i?n:this.visit(i);return this.scope.pop(),s.ok?(this.block_results.push({block_type:s.value,return_type:r.length>0?r[0]:new Lt(yt.empty,"")}),s):s}visitConstant_declaration(t){const e=t.const_name().text,r=new Lt(Ct(t.type().text)),i=this.visit(t.expression());return i.ok?Ht(i.value.type,r.type)?(ft(this.scope,e,r),{ok:!0,value:new Lt(yt.empty)}):{ok:!1,error:new Ft(`constant '${e}' declared with type ${r.type} but got ${i.value.type}`,t.start.line)}:i}visitVariable_declaration(t){const e=this.visitExpression(t.expression());if(!e.ok)return e;const r=t.var_name().text,i=""!==t.mutable().text,n=t.type(),s=new Lt(void 0===n?function(t){return t===yt.integer_literal?yt.i32:t===yt.float_literal?yt.f32:t}(e.value.type):Ct(n.text),e.value.value,i);return Ht(e.value.type,s.type)?(ft(this.scope,r,s),{ok:!0,value:new Lt(yt.empty)}):{ok:!1,error:new Ft(`variable '${r}' declared with type ${Nt(s.type)} but got ${Nt(e.value.type)}`,t.start.line)}}visitFunction_declaration(t){var e,r,i,n;this.block_results=[],this.return_types=[];const s=t.function_name().text,o=t.type().text,a=[];null===(r=null===(e=t.parameter_list())||void 0===e?void 0:e.parameters())||void 0===r||r.parameter().forEach((t=>{const e=new Lt(Ct(t.type().text));a.push(e)}));for(const e of a)if(e.type===yt.unknown)return this.print_fn("Unknown type in function ",s),{ok:!1,error:new Ft(`unknown type in function '${s}'`,t.start.line)};const _="<"+a.map((t=>Nt(t.type))).join(", ")+">",l=new Lt(Ct("function"),_+" -> "+o);this.print_fn("Adding function ",s," to scope with type ",l.value),ft(this.scope,s,l),this.scope.push(new Map);const u=[];null===(n=null===(i=t.parameter_list())||void 0===i?void 0:i.parameters())||void 0===n||n.parameter().forEach((t=>{const e=t.IDENTIFIER().text;u.push(e)}));for(let t=0;t<u.length;t++)ft(this.scope,u[t],a[t]);this.scope.push(new Map);const c=this.visit(t.function_body());if(!c.ok)return c;this.scope.pop();const h=this.block_results[this.block_results.length-1],p=this.block_results.slice(0,-1);let d=yt.unknown;for(const e of p){if(e.return_type.type!==yt.empty&&!Ht(e.return_type.type,Ct(o)))return{ok:!1,error:new Ft(`all return types in block must be the same but got ${e.return_type} and ${o}`,t.start.line)};d=d===yt.unknown?e.return_type.type:d}return h.block_type.type===yt.empty&&h.return_type.type===yt.empty?(this.print_fn("No final expression and no return statement -> Either function declared to return empty type or all blocks return empty type"),o===yt.empty||Ht(d,Ct(o))?{ok:!0,value:l}:{ok:!1,error:new Ft(`function '${s}' expects return type ${o} but got empty type`,t.start.line)}):h.block_type.type===yt.empty&&h.return_type.type!==yt.empty?(this.print_fn("No final expression but return statement is present "),Ht(h.return_type.type,Ct(o))?{ok:!0,value:l}:{ok:!1,error:new Ft(`function '${s}' expects return type ${o} but got ${Nt(h.return_type.type)}`,t.start.line)}):h.block_type.type!==yt.empty&&h.return_type.type===yt.empty?(this.print_fn("Final expression but no return statement"),Ht(h.block_type.type,Ct(o))?{ok:!0,value:l}:{ok:!1,error:new Ft(`function '${s}' expects return type ${o} but got the implicit return type ${Nt(h.block_type.type)}`,t.start.line)}):(this.print_fn("Both final expression and return statement are present"),Ht(h.return_type.type,Ct(o))?Ht(h.block_type.type,Ct(o))?{ok:!1,error:new Ft(`function '${s}' has an unknown error`,t.start.line)}:{ok:!1,error:new Ft(`function '${s}' expects return type ${o} but got the implicit return type ${h.block_type.type}`,t.start.line)}:{ok:!1,error:new Ft(`function '${s}' expects return type ${o} but got ${h.return_type.type}`,t.start.line)})}visitParameter_list(t){const e=t.parameters();if(void 0!==e){const t=e.parameter();for(const e of t){const t=e.IDENTIFIER().text,r=new Lt(Ct(e.type().text));ft(this.scope,t,r)}}return this.visitChildren(t)}visitName(t){const e=t.start.line,r=t.text,i=mt(this.scope,r);return void 0===i?{ok:!1,error:new Ft(`name '${r}' not declared in this scope`,e)}:{ok:!0,value:i}}visitExpression(t){var e;this.print_fn("Checking expression type "+t.text);const r=t.literal();if(void 0!==r)return r.boolean_literal()?{ok:!0,value:new Lt(yt.bool)}:r.float_literal()?{ok:!0,value:new Lt(yt.float_literal)}:r.integer_literal()?{ok:!0,value:new Lt(yt.integer_literal)}:r.string_literal()?{ok:!0,value:new Lt(bt(yt.string))}:{ok:!1,error:new Ft(`${r.text} is not a valid literal`,t.start.line)};const i=t.name();if(void 0!==i)return this.visitName(i);const n=t.block();if(void 0!==n)return this.visit(n);const s=t.binary_operator();if(void 0!==s){const e=this.visit(t.expression(0)),r=this.visit(t.expression(1));if(!e.ok)return e;if(!r.ok)return r;const i=e.value.type,n=r.value.type;return It(i)&&It(n)?void 0===(i===yt.integer_literal?e:n===yt.integer_literal?r:void 0)?i!==n?{ok:!1,error:new Ft(`type mismatch: operator ${s.text} does not support types ${i} and ${n}`,t.start.line)}:{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(i)}:i===yt.integer_literal?{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(n)}:{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(i)}:Mt(i)&&Mt(n)?void 0===(i===yt.float_literal?e:n===yt.float_literal?r:void 0)?i!==n?{ok:!1,error:new Ft(`type mismatch: operator ${s.text} does not support types ${i} and ${n}`,t.start.line)}:{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(i)}:i===yt.float_literal?{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(n)}:{ok:!0,value:Ot(s.text)?new Lt(yt.bool):new Lt(i)}:{ok:!1,error:new Ft(`type mismatch: operator ${s.text} does not support types ${Nt(i)} and ${Nt(n)}`,t.start.line)}}const o=t.binary_logical_operator();if(void 0!==o){const e=this.visit(t.expression(0)),r=this.visit(t.expression(1));if(!e.ok)return e;if(!r.ok)return r;const i=e.value.type,n=r.value.type;return Pt(i)&&Pt(n)?{ok:!0,value:new Lt(yt.bool)}:{ok:!1,error:new Ft(`type mismatch: operator ${o.text} expects boolean types but got ${i} and ${n}`,t.start.line)}}const a=t.unary_operator();if(void 0!==a){const e=(t=>{switch(t){case"!":return Pt;case"-":return t=>It(t)||Mt(t);default:return()=>!1}})(a.text),r=this.visit(t.expression(0));return r.ok?e(r.value.type)?{ok:!0,value:r.value}:{ok:!1,error:new Ft(`type mismatch: operator ${a.text} expects boolean type but got ${r.value.type}`,t.start.line)}:r}const _=t.function_application();if(void 0!==_){const r=_.function_name().text;this.print_fn("Checking function application ",r);const i=mt(this.scope,r);if(void 0===i)return{ok:!1,error:new Ft(`function '${r}' not declared in this scope. This is a SyntaxError!`,t.start.line)};if(i.type!==yt.function)return{ok:!1,error:new Error(`Line ${t.start.line}: call expression to '${r}' requires function type but got ${i.type}`)};if(void 0===i.value)return{ok:!1,error:new Ft(`function '${r}' has no type. This is a TypeValidator bug!`,t.start.line)};const n=i.value,s=n.split("->")[0].trim().slice(1,-1),o=n.split("->")[1].trim(),a=0===s.length?[]:s.split(",").map((t=>Ct(t.trim()))),l=Ct(o),u=null===(e=_.args_list().args())||void 0===e?void 0:e.expression(),c=(void 0===u?[]:u).map((t=>this.visit(t))),h=c.find((t=>!t.ok));if(void 0!==h)return h;const p=c.map((t=>t.ok?t.value.type:yt.unknown)).filter((t=>t!==yt.unknown));if(1===a.length&&a[0]===yt.unit)return{ok:!0,value:new Lt(l)};if(a.length!==p.length)return{ok:!1,error:new Ft(`function '${r}' expects ${a.length} arguments but got ${p.length}`,t.start.line)};for(let e=0;e<a.length;e++)if(a[e]!==p[e]&&!Ht(p[e],a[e]))return{ok:!1,error:new Ft(`type mismatch: function '${r}' expects type ${Nt(a[e])} but got ${Nt(p[e])} for argument ${e+1}`,t.start.line)};return{ok:!0,value:new Lt(l)}}const l=t.parens_expression();if(void 0!==l)return this.visit(l.expression());const u=t.if_expression();if(void 0!==u)return this.visit(u);const c=t.closure();if(void 0!==c){const t=this.block_results.length,e=this.visitClosure(c);return this.block_results=this.block_results.slice(0,t),e}const h=t.assignment();if(void 0!==h)return this.visitAssignment(h);const p=t.refed_name();if(void 0!==p)return this.visitRefed_name(p);const d=t.derefed_name();return void 0!==d?this.visitDerefed_name(d):(this.print_fn("\tUnknown expression type!"),{ok:!1,error:new Ft("unknown expression type",t.start.line)})}visitImmutable_refed_name(t){const e=t.name(),r=t.refed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new Ft("refed_name has no name or refed_name. This is a Parser bug!",t.start.line)};let i=void 0!==e?this.visitName(e):void 0!==r?this.visitRefed_name(r):void 0;return void 0===i?{ok:!1,error:new Ft("refed_name has no name or refed_name. This is a Parser bug! [Impossible code path]",t.start.line)}:i.ok?{ok:!0,value:new Lt(bt(i.value.type))}:i}visitMutable_refed_name(t){const e=t.name(),r=t.refed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new Ft("refed_name has no name or refed_name. This is a Parser bug!",t.start.line)};let i=void 0!==e?this.visitName(e):void 0!==r?this.visitRefed_name(r):void 0,n=void 0!==e?e.text:null==r?void 0:r.text;return void 0===i?{ok:!1,error:new Ft("refed_name has no name or refed_name. This is a Parser bug! [Impossible code path]",t.start.line)}:i.ok?i.value.is_mutable?{ok:!0,value:new Lt((s=i.value.type,new gt(new At(s))),void 0,!0)}:{ok:!1,error:new Ft(`cannot borrow ${n} as mutable, as it is not declared as mutable`,t.start.line)}:i;var s}visitRefed_name(t){const e=t.immutable_refed_name();if(void 0!==e)return this.visitImmutable_refed_name(e);const r=t.mutable_refed_name();return void 0!==r?this.visitMutable_refed_name(r):{ok:!1,error:new Ft("refed_name has no immutable_refed_name or mutable_refed_name. This is a Parser bug!",t.start.line)}}visitDerefed_name(t){const e=t.name(),r=t.derefed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new Ft("derefed_name has no name or derefed_name. This is a Parser bug!",t.start.line)};let i=Bt(e,r);if(void 0===i)return{ok:!1,error:new Ft("derefed_name has no name or derefed_name. This is a Parser bug! [Impossible code path]",t.start.line)};const n=i.name,s=i.num_deref,o=this.visitName(n);if(!o.ok)return o;let a=o.value.type;for(let e=s;e>0;e--){if(!wt(a))return{ok:!1,error:new Ft(`type ${Nt(a)} cannot be dereferenced`,t.start.line)};a=kt(a)}return{ok:!0,value:new Lt(a)}}visitClosure(t){var e,r,i,n;this.print_fn("Visiting closure");const s=Ct(t.type().text),o=[];null===(r=null===(e=t.closure_parameter_list())||void 0===e?void 0:e.parameters())||void 0===r||r.parameter().forEach((t=>{const e=new Lt(Ct(t.type().text));o.push(e)}));const a="<"+o.map((t=>Nt(t))).join(", ")+">";this.print_fn("Adding closure to scope with type ",a+" -> "+s);const _=new Lt(Ct("function"),a+" -> "+s);this.scope.push(new Map);const l=[];null===(n=null===(i=t.closure_parameter_list())||void 0===i?void 0:i.parameters())||void 0===n||n.parameter().forEach((t=>{const e=t.IDENTIFIER().text;l.push(e)}));for(let t=0;t<l.length;t++)ft(this.scope,l[t],o[t]);this.scope.push(new Map),this.block_results.length;const u=this.visit(t.function_body());if(!u.ok)return u;this.scope.pop();const c=this.block_results[this.block_results.length-1],h=this.block_results.slice(0,-1);let p=yt.unknown;for(const e of h){if(e.return_type.type!==yt.empty&&!Ht(e.return_type.type,s))return{ok:!1,error:new Ft(`all return types in block must be the same but got ${e.return_type} and ${s}`,t.start.line)};p=p===yt.unknown?e.return_type.type:p}return c.block_type.type===yt.empty&&c.return_type.type===yt.empty?(this.print_fn("No final expression and no return statement -> Either closure declared to return empty type or all blocks return empty type"),s===yt.empty||Ht(p,s)?{ok:!0,value:_}:{ok:!1,error:new Ft(`closure expects return type ${s} but got empty type`,t.start.line)}):c.block_type.type===yt.empty&&c.return_type.type!==yt.empty?(this.print_fn("No final expression but return statement is present "),Ht(c.return_type.type,s)?{ok:!0,value:_}:{ok:!1,error:new Ft(`closure expects return type ${s} but got ${c.return_type.type}`,t.start.line)}):c.block_type.type!==yt.empty&&c.return_type.type===yt.empty?(this.print_fn("Final expression but no return statement"),s===c.block_type.type?{ok:!0,value:_}:{ok:!1,error:new Ft(`closure expects return type ${s} but got the implicit return type ${c.block_type.type}`,t.start.line)}):(this.print_fn("Both final expression and return statement are present"),Ht(c.return_type.type,s)?Ht(c.block_type.type,s)?{ok:!1,error:new Ft("closure has an unknown error",t.start.line)}:{ok:!1,error:new Ft(`closure expects return type ${s} but got the implicit return type ${c.block_type.type}`,t.start.line)}:{ok:!1,error:new Ft(`closure expects return type ${s} but got ${c.return_type.type}`,t.start.line)})}visitAssignment(t){const e=t.name(),r=t.derefed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new Ft("assignment has no name or derefed_name. This is a Parser bug!",t.start.line)};if(void 0!==e){const r=this.visitName(e);if(!r.ok)return r;const i=e.text,n=r.value;if(void 0===n)return{ok:!1,error:new Ft(`variable '${i}' not declared in this scope`,t.start.line)};if(!n.is_mutable)return{ok:!1,error:new Ft(`cannot assign to immutable variable ${i} with type ${Nt(n.type)}`,t.start.line)};const s=this.visit(t.expression());return s.ok?Ht(s.value.type,n.type)?{ok:!0,value:new Lt(yt.empty)}:{ok:!1,error:new Ft(`variable '${i}' declared with type ${Nt(n.type)} but got ${Nt(s.value.type)}`,t.start.line)}:s}{let e=r;const n=Bt(null==e?void 0:e.name(),null==e?void 0:e.derefed_name());if(void 0===n)return{ok:!1,error:new Ft("assignment has no name or derefed_name. This is a Parser bug!",t.start.line)};const{name:s,num_deref:o}=n,a=this.visitName(s);if(!a.ok)return a;let _=a.value.type;for(let e=o;e>0;e--){if(!wt(_))return{ok:!1,error:new Ft(`type ${Nt(_)} cannot be dereferenced`,t.start.line)};if(!((i=_)instanceof gt&&i.type instanceof At))return{ok:!1,error:new Ft(`cannot assign to ${null==r?void 0:r.text}, which is behind an immutable reference`,t.start.line)};_=kt(_)}const l=this.visit(t.expression());return l.ok?Ht(l.value.type,_)?{ok:!0,value:new Lt(yt.empty)}:{ok:!1,error:new Ft(`variable '${s}' declared with type ${Nt(a.value.type)} but got ${Nt(l.value.type)}`,t.start.line)}:l}var i}visitCond_expr(t){const e=this.visitChildren(t);return e.ok?Pt(e.value.type)?e:{ok:!1,error:new Ft(`condition expression must be of type bool but got ${Nt(e.value.type)}`,t.start.line)}:e}visitIf_expression(t){const e=this.visit(t.cond_expr());if(!e.ok)return e;if(!Pt(e.value.type))return{ok:!1,error:new Ft(`condition expression must be of type bool but got ${Nt(e.value.type)}`,t.start.line)};const r=this.visit(t.block(0));if(!r.ok)return r;const i=void 0===t.block(1)?t.if_expression():t.block(1);if(void 0===i)return r;const n=this.visit(i);return n.ok?Ht(r.value.type,n.value.type)||Ht(n.value.type,r.value.type)?r:{ok:!1,error:new Ft(`if/else blocks must have the same type but got ${r.value} and ${n.value}`,t.start.line)}:n}}class $t extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.debug_mode=t,this.rule_name="Types",this.print_fn=ht(t),this.type_producer=new Vt(t)}defaultResult(){return!0}aggregateResult(t,e){return t&&e}visitProgram(t){this.print_fn("Calling type producer");const e=this.type_producer.visit(t);return!!e.ok||(console.error(e.error),!1)}}var zt=r(9696),qt=r(8365),Wt=r(3186);const Yt=new Map([["!",Wt.Ay.NOTG],["-",Wt.Ay.NEGG]]),Kt=new Map([["+",Wt.Ay.ADDG],["-",Wt.Ay.SUBG],["*",Wt.Ay.MULG],["/",Wt.Ay.DIVG],["%",Wt.Ay.MODG],["<",Wt.Ay.LTG],[">",Wt.Ay.GTG],["<=",Wt.Ay.LEG],[">=",Wt.Ay.GEG],["==",Wt.Ay.EQG],["!=",Wt.Ay.NEQG]]);function Qt(t,e){const r=t.name();if(void 0!==r)return{name:r,num_deref:e+1};const i=t.derefed_name();return void 0!==i?Qt(i,e+1):void 0}function Jt(t){return Qt(t,0)}function Xt(t){const e=t.immutable_refed_name();if(void 0!==e)return jt(e);const r=t.mutable_refed_name();return void 0!==r?function(t){return jt(t)}(r):"NOT_REACHABLE"}function jt(t){const e=t.name();if(void 0!==e)return e.text;const r=t.refed_name();return void 0!==r?Xt(r):"NOT_REACHABLE"}function Zt(t){if(!t.ok)return t;const e=t.value.instructions.concat([{opcode:Wt.Ay.POPG,operands:[]}]);return{ok:!0,value:{max_stack_size:t.value.max_stack_size,instructions:e}}}function te(t,e,r){const i=[];if(!t.ok)return t;if(!e.ok)return e;if(!r.ok)return r;const n=Math.max(t.value.max_stack_size,e.value.max_stack_size,r.value.max_stack_size),s={opcode:Wt.Ay.BRF,operands:[2+e.value.instructions.length]},o={opcode:Wt.Ay.BR,operands:[1+r.value.instructions.length]};return i.push(...t.value.instructions),i.push(s),i.push(...e.value.instructions),i.push(o),i.push(...r.value.instructions),{ok:!0,value:{max_stack_size:n,instructions:i}}}class ee extends ut.AbstractParseTreeVisitor{constructor(t,e=!1){super(),this.static_context=t,this.language_version="Rust2",this.environments=[],this.closures=[],this.num_top_level_functions=0,this.print_fn=ht(e)}setNumTopLevelFunctions(t){this.num_top_level_functions=t}getClosures(){return this.closures}setEnvironments(t){this.environments=t}defaultResult(){return{ok:!0,value:{max_stack_size:0,instructions:[]}}}aggregateResult(t,e){return t.ok?e.ok?{ok:!0,value:{max_stack_size:Math.max(t.value.max_stack_size,e.value.max_stack_size),instructions:t.value.instructions.concat(e.value.instructions)}}:e:t}visitProgram(t){return{ok:!1,error:new zt.EC(t.start.line,"InstructionCompiler can only run on blocks and below!. Received Program instead.")}}visitInteger_literal(t){this.print_fn("Visiting integer_literal");const e=parseInt(t.text);return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:zt.pw.get("i32"),operands:[e]}]}}}visitFloat_literal(t){this.print_fn("Visiting float_literal");const e=parseFloat(t.text);return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:zt.pw.get("f32"),operands:[e]}]}}}visitString_literal(t){this.print_fn("Visiting string_literal");const e=t.text;return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:zt.pw.get("string"),operands:[e]}]}}}visitBoolean_literal(t){this.print_fn("Visiting boolean_literal");const e=t.text;return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:zt.pw.get(e),operands:[]}]}}}visitConstant_declaration(t){this.print_fn("Visiting constant_declaration");const e=t.const_name().text;this.print_fn("Constant name: ",e);const r=this.visit(t.expression());if(!r.ok)return r;const i=r.value,n=this.environments[this.environments.length-1],s=t.type().text,o=n.push(e,s);if(o>=256)return this.print_fn("Error: too many variables in scope"),{ok:!1,error:new zt.EC(t.start.line,"Too many variables in scope")};const a=i.instructions.concat([{opcode:Wt.Ay.STLG,operands:[o]},{opcode:Wt.Ay.LGCU,operands:[]}]);return{ok:!0,value:{max_stack_size:i.max_stack_size,instructions:a}}}visitVariable_declaration(t){this.print_fn("Visiting variable_declaration");const e=t.var_name().text;this.print_fn("Variable name: ",e);const r=this.visit(t.expression());if(!r.ok)return r;const i=r.value,n=this.environments[this.environments.length-1].push(e,"i32");if(n>=256)return this.print_fn("Error: too many variables in scope"),{ok:!1,error:new zt.EC(t.start.line,"Too many variables in scope")};const s=i.instructions.concat([{opcode:Wt.Ay.STLG,operands:[n]},{opcode:Wt.Ay.LGCU,operands:[]}]);return{ok:!0,value:{max_stack_size:i.max_stack_size,instructions:s}}}visitLiteral(t){const e=t.boolean_literal();if(void 0!==e)return this.visitBoolean_literal(e);const r=t.integer_literal();if(void 0!==r)return this.visitInteger_literal(r);const i=t.float_literal();if(void 0!==i)return this.visitFloat_literal(i);const n=t.string_literal();return void 0!==n?this.visitString_literal(n):{ok:!1,error:new zt.EC(t.start.line,"Unknown literal. This should not happen.")}}visitName(t){const e=t.text,r=(0,zt.sH)(this.environments,e);if(void 0===r){const r=this.static_context.lookup(e);if(void 0===r)return{ok:!1,error:new zt.EC(t.start.line,`Variable ${e} not found in environment or compile-time context. This is a Validator Error.`)};const i=this.static_context.get_type(r),n=this.static_context.get_value(r);return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:zt.pw.get(i),operands:[n]}]}}}const i=this.environments.length-1,[n,s]=r;if(-1===s)return{ok:!1,error:new zt.EC(t.start.line,"Unknown variable")};const o=i-n;return{ok:!0,value:{max_stack_size:1,instructions:[0===o?{opcode:Wt.Ay.LDLG,operands:[s]}:{opcode:Wt.Ay.LDPG,operands:[s,o]}]}}}visitExpression(t){this.print_fn("Visiting expression");const e=t.literal();if(void 0!==e)return this.visitLiteral(e);const r=t.name();if(void 0!==r)return this.visitName(r);const i=t.block();if(void 0!==i){const t=this.visitBlock(i);return t.ok,t}const n=t.binary_operator();if(void 0!==n)return function(t,e,r){if(!e.ok)return e;if(!r.ok)return r;const i=Kt.get(t.text),n=e.value.instructions.concat(r.value.instructions,[{opcode:i,operands:[]}]);return{ok:!0,value:{max_stack_size:1+Math.max(e.value.max_stack_size,r.value.max_stack_size),instructions:n}}}(n,this.visit(t.expression(0)),this.visit(t.expression(1)));const s=t.binary_logical_operator();if(void 0!==s){const e=this.visit(t.expression(0)),r=this.visit(t.expression(1));return"&&"===s.text?te(e,r,e):"||"===s.text?te(e,e,r):{ok:!1,error:new zt.EC(t.start.line,`Unknown binary_logical_operator: ${s.text}. This should not happen.`)}}const o=t.unary_operator();if(void 0!==o){const e=this.visit(t.expression(0));if(!e.ok)return e;const r=Yt.get(o.text),i=e.value.instructions.concat([{opcode:r,operands:[]}]);return{ok:!0,value:{max_stack_size:e.value.max_stack_size,instructions:i}}}const a=t.function_application();if(void 0!==a)return this.visitFunction_application(a);const _=t.parens_expression();if(void 0!==_)return this.visitExpression(_.expression());const l=t.if_expression();if(void 0!==l)return this.visitIf_expression(l);const u=t.closure();if(void 0!==u)return this.visitClosure(u);const c=t.assignment();if(void 0!==c)return this.visitAssignment(c);const h=t.derefed_name();if(void 0!==h)return this.visitDerefed_name(h);const p=t.refed_name();return void 0!==p?this.visitRefed_name(p):{ok:!1,error:new zt.EC(t.start.line,"Not implemented: Unknown Case Expression")}}visitRefed_name(t){const e=t.text,r=Xt(t),i=(0,zt.sH)(this.environments,r);if(void 0===i)return{ok:!1,error:new zt.EC(t.start.line,`Unknown variable ${e}. This is a ValidatorError!`)};const[n,s]=i,o=this.environments.length-1-n;return{ok:!0,value:{max_stack_size:1,instructions:[{opcode:Wt.Ay.LDPA,operands:[s,o]}]}}}visitDerefed_name(t){const e=t.text,r=Jt(t);if(void 0===r)return{ok:!1,error:new zt.EC(t.start.line,`Unknown variable ${e}. This is a ValidatorError!`)};const{name:i,num_deref:n}=r,s=i.text,o=(0,zt.sH)(this.environments,s);if(void 0===o)return{ok:!1,error:new zt.EC(t.start.line,`Unknown variable ${e}. This is a ValidatorError!`)};const[a,_]=o,l=this.environments.length-1-a,u=[{opcode:Wt.Ay.LDPG,operands:[_,l]}];for(let t=0;t<n;t++)u.push({opcode:Wt.Ay.DEREF,operands:[]});return{ok:!0,value:{max_stack_size:1,instructions:u}}}visitAssignment(t){this.print_fn("Visiting assignment");const e=t.name();if(void 0!==e)return this.visitAssignment_impl(t.start.line,e.text,t.expression());const r=t.derefed_name();if(void 0!==r){const e=Jt(r);if(void 0===e)return{ok:!1,error:new zt.EC(t.start.line,`Unknown variable ${r.text}. This is a ValidatorError!`)};const{name:i,num_deref:n}=e;return this.visitAssignment_impl(t.start.line,i.text,t.expression())}return{ok:!1,error:new zt.EC(t.start.line,"Unknown assignment. This should not happen.")}}visitAssignment_impl(t,e,r){const i=this.visitExpression(r);if(!i.ok)return i;const n=i.value,s=(0,zt.sH)(this.environments,e);if(void 0===s)return{ok:!1,error:new zt.EC(t,`Unknown variable ${e}. This is a ValidatorError!`)};const[o,a]=s,_=this.environments.length-1-o;return n.instructions.push(0===_?{opcode:Wt.Ay.STLG,operands:[a]}:{opcode:Wt.Ay.STPG,operands:[a,_]}),n.instructions.push({opcode:Wt.Ay.LGCU,operands:[]}),{ok:!0,value:{max_stack_size:n.max_stack_size,instructions:n.instructions}}}visitClosure(t){var e;this.print_fn("Visiting closure");const r=(null===(e=t.closure_parameter_list().parameters())||void 0===e?void 0:e.parameter())||[],i=new zt.OH;for(let t=0;t<r.length;t++){const e=r[t].IDENTIFIER().text,n=r[t].type().text;i.push(e,n)}this.environments.push(i);const n=t.function_body(),s=this.visitFunction_body(n);if(this.environments.pop(),!s.ok)return s;const o=n.block().statement().filter((t=>void 0!==t.constant_declaration()||void 0!==t.variable_declaration())).length,a=s.value,_={stack_size:a.max_stack_size,environment_size:r.length+o,num_args:r.length,instructions:a.instructions},l=this.closures.length;return this.closures.push(_),{ok:!0,value:{max_stack_size:1,instructions:[{opcode:Wt.Ay.NEWC,operands:[this.num_top_level_functions+l]}]}}}visitFunction_declaration(t){return this.print_fn("Visiting function_declaration"),{ok:!1,error:new zt.EC(t.start.line,"InstructionCompiler can only run on blocks and below!. Received Function_declaration instead.")}}visitReturn_expression(t){this.print_fn("Visiting return_expression");const e=this.visitExpression(t.expression());return e.ok?(e.value.instructions.push({opcode:Wt.Ay.RETG,operands:[]}),e):e}visitIf_expression(t){this.print_fn("Visiting if_expression");const e={ok:!0,value:{max_stack_size:0,instructions:[{opcode:Wt.Ay.NOP,operands:[]}]}};return te(this.visit(t.cond_expr()),this.visit(t.block(0)),void 0!==t.block(1)?this.visit(t.block(1)):e)}visitCond_expr(t){return this.print_fn("Visiting cond_expr"),this.visit(t.expression())}compile_built_in_function(t,e){var r;const i=[];if("println!"===e){let e=0;const n=(null===(r=t.args_list().args())||void 0===r?void 0:r.expression())||[];for(const t of n){const r=this.visitExpression(t);if(!r.ok)return r;e=Math.max(e,r.value.max_stack_size),i.push(...r.value.instructions)}return i.push({opcode:Wt.Ay.DISPLAY,operands:[n.length]}),{ok:!0,value:{max_stack_size:n.length+e,instructions:i}}}return{ok:!1,error:new zt.EC(t.start.line,`Function ${e} not found in environment. This is a Validator error.`)}}visitFunction_application(t){var e;this.print_fn("Visiting function_application");const r=t.function_name().text,i=(0,zt.sH)(this.environments,r);if(void 0===i)return this.compile_built_in_function(t,r);const n=[],[s,o]=i,a=this.environments.length-1-s;n.push(0===a?{opcode:Wt.Ay.LDLG,operands:[o]}:{opcode:Wt.Ay.LDPG,operands:[o,a]});let _=0;const l=(null===(e=t.args_list().args())||void 0===e?void 0:e.expression())||[];for(const t of l){const e=this.visitExpression(t);if(!e.ok)return e;_=Math.max(_,e.value.max_stack_size),n.push(...e.value.instructions)}return n.push({opcode:Wt.Ay.CALL,operands:[l.length]}),{ok:!0,value:{max_stack_size:l.length+_,instructions:n}}}visitBlock(t){this.print_fn("Visiting block");const e=[],r=t.statement().filter((t=>void 0!==t.constant_declaration()||void 0!==t.variable_declaration())).length;r>0&&(this.environments.push(new zt.OH),e.push({opcode:Wt.Ay.NEWENV,operands:[r]}));const i=t.statement();let n=0;for(const t of i){const r=this.visit(t);if(!r.ok)return r;n=Math.max(n,r.value.max_stack_size),e.push(...r.value.instructions)}const s=t.expression();if(void 0!==s){const t=this.visit(s);if(!t.ok)return t;n=Math.max(n,t.value.max_stack_size),e.push(...t.value.instructions)}else e.push({opcode:Wt.Ay.LGCU,operands:[]});return r>0&&(e.push({opcode:Wt.Ay.POPENV,operands:[]}),this.environments.pop()),{ok:!0,value:{max_stack_size:n,instructions:e}}}visitFunction_body(t){this.print_fn("Visiting function_body");const e=this.visitBlock(t.block());return e.ok?(e.value.instructions.push({opcode:Wt.Ay.RETG,operands:[]}),e):e}visitStatement(t){this.print_fn("Visiting statement");const e=t.constant_declaration();if(void 0!==e)return Zt(this.visitConstant_declaration(e));const r=t.variable_declaration();if(void 0!==r)return Zt(this.visitVariable_declaration(r));const i=t.return_expression();if(void 0!==i)return this.visitReturn_expression(i);const n=t.expression();return void 0!==n?Zt(this.visitExpression(n)):{ok:!1,error:new zt.EC(t.start.line,"Unknown statement. This should not happen.")}}}class re extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.debug_mode=t,this.language_version="Rust2",this.constant_env=new zt.kW,this.function_env=new zt.OH,this.functions=[],this.instruction_compiler=new ee(this.constant_env,t),this.compile_time_evaluator=new qt.q}defaultResult(){return{ok:!0,value:{entry_point:void 0,functions:[]}}}aggregateResult(t,e){return t.ok?e.ok?{ok:!0,value:{entry_point:void 0===t.value.entry_point?t.value.entry_point:e.value.entry_point,functions:t.value.functions.concat(e.value.functions)}}:e:t}visitConstant_declaration(t){const e=t.const_name().text,r=t.type().text;if(void 0!==this.constant_env.lookup(e))return{ok:!1,error:new zt.EC(t.start.line,"Cannot redeclare a constant. This is a Validator error.")};const i=this.compile_time_evaluator.visitExpression(t.expression());return i.ok?(this.constant_env.push(e,r,i.value),{ok:!0,value:{entry_point:void 0,functions:[]}}):{ok:!1,error:i.error}}visitProgram(t){var e,r;const i=t.program_element().map((t=>t.constant_declaration())).filter((t=>void 0!==t));for(const t of i){const e=this.visitConstant_declaration(t);if(!e.ok)return e}const n=t.program_element().map((t=>t.function_declaration())).filter((t=>void 0!==t)),s=[];for(const t of n){const r=t.function_name().text,i=t.type().text,n=(null===(e=t.parameter_list().parameters())||void 0===e?void 0:e.parameter().length)||0,o=this.function_env.push(r,i);this.functions.push({stack_size:NaN,environment_size:n,num_args:n,instructions:[]}),"main"!==r&&(s.push({opcode:Wt.Ay.NEWC,operands:[o]}),s.push({opcode:Wt.Ay.STLG,operands:[o]}))}this.instruction_compiler.setNumTopLevelFunctions(this.functions.length);const o=this.function_env.lookup("main");if(void 0===o)return{ok:!1,error:new zt.EC(t.start.line,"No entry point found. This is a Validator error")};for(let t=0;t<n.length;t++){const e=n[t],i=e.function_body(),a=(null===(r=e.parameter_list().parameters())||void 0===r?void 0:r.parameter())||[],_=new zt.OH;for(let t=0;t<a.length;t++){const e=a[t].IDENTIFIER().text,r=a[t].type().text;_.push(e,r)}this.instruction_compiler.setEnvironments(0===_.get_size()?[this.function_env]:[this.function_env,_]);const l=this.instruction_compiler.visitFunction_body(i);if(!l.ok)return{ok:!1,error:l.error};const u=i.block().statement().filter((t=>void 0!==t.constant_declaration()||void 0!==t.variable_declaration())).length,c=l.value,h=this.functions[t];t===o?(h.environment_size=h.num_args+u+n.length-1,h.stack_size=c.max_stack_size,h.instructions=s.concat(c.instructions)):(h.environment_size=h.num_args+u,h.stack_size=c.max_stack_size,h.instructions=c.instructions)}const a=this.instruction_compiler.getClosures();if(this.functions=this.functions.concat(a),this.debug_mode){console.log("Compile-time values:");for(let t=0;t<this.constant_env.num_variables();t++)console.log(`  ${this.constant_env.get_name(t)}: ${this.constant_env.get_value(t)}`);console.log("Functions:");for(let t=0;t<this.function_env.get_size();t++){console.log(`\t${this.function_env.get_name(t)}: ${this.function_env.get_type(t)}`),console.log("Stack size: ",this.functions[t].stack_size),console.log("Environment size: ",this.functions[t].environment_size),console.log("Num args: ",this.functions[t].num_args),console.log("Instructions: ");for(const e of this.functions[t].instructions)console.log("\t",Wt.Ay[e.opcode],e.operands)}}return{ok:!0,value:{entry_point:o,functions:this.functions}}}}class ie extends Error{constructor(t,e){super(`Line ${e}: ${t}`),this.name=this.constructor.name}}function ne(t,e){for(let r=t.length-1;r>=0;r--){const i=t[r].get(e);if(void 0!==i)return[r,i]}}class se extends ut.AbstractParseTreeVisitor{constructor(){super(...arguments),this.lender_scopes=[new Map],this.borrower_scopes=[new Map]}defaultResult(){return{ok:!0,value:!0}}aggregateResult(t,e){return t.ok?e.ok?{ok:!0,value:t.value&&e.value}:e:t}visitBlock(t){this.lender_scopes.push(new Map),this.borrower_scopes.push(new Map);const e=this.visitChildren(t),r=this.borrower_scopes.pop();if(void 0!==r){const e=Array.from(r.entries()).map((([t,e])=>e));for(const r of e){const e=ne(this.lender_scopes,r.lender_name);if(void 0===e)return{ok:!1,error:new ie(`Variable ${r.lender_name} not found in lender scopes. This is likely a BorrowChecker bug.`,t.start.line)};const[i,n]=e;"immutable"===r.type?this.lender_scopes[i].set(r.lender_name,{immutable_borrow:n.immutable_borrow-1,any_mutable_borrow:n.any_mutable_borrow}):"mutable"===r.type&&this.lender_scopes[i].set(r.lender_name,{immutable_borrow:n.immutable_borrow,any_mutable_borrow:!1})}}return this.lender_scopes.pop(),e}visitVariable_declaration(t){const e=this.visit(t.expression());if(!e.ok)return e;const r=t.var_name().text,i=this.lender_scopes[this.lender_scopes.length-1],n=this.borrower_scopes[this.borrower_scopes.length-1];return i.set(r,{immutable_borrow:0,any_mutable_borrow:!1}),void 0!==this.lender_info&&(n.set(r,this.lender_info),this.lender_info=void 0),{ok:!0,value:!0}}visitConstant_declaration(t){const e=this.visit(t.expression());if(!e.ok)return e;const r=t.const_name().text,i=this.lender_scopes[this.lender_scopes.length-1],n=this.borrower_scopes[this.borrower_scopes.length-1];return i.set(r,{immutable_borrow:0,any_mutable_borrow:!1}),void 0!==this.lender_info&&(n.set(r,this.lender_info),this.lender_info=void 0),{ok:!0,value:!0}}visitExpression(t){const e=t.refed_name();if(e)return this.visitRefed_name(e);const r=t.block();return r?this.visitBlock(r):{ok:!0,value:!0}}visitImmutable_refed_name(t){const e=t.name(),r=t.refed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new ie("refed_name has no name or refed_name. This is a Parser bug!",t.start.line)};if(void 0!==e){const r=e.text,i=ne(this.lender_scopes,r);if(void 0===i)return{ok:!1,error:new ie(`Variable ${r} not found in lender scopes`,t.start.line)};const[n,s]=i;return s.any_mutable_borrow?{ok:!1,error:new ie(`Cannot borrow ${r} as mutable`,t.start.line)}:(this.lender_scopes[n].set(r,{immutable_borrow:s.immutable_borrow+1,any_mutable_borrow:!1}),this.lender_info={lender_name:r,type:"immutable"},{ok:!0,value:!0})}if(void 0!==r){const e=this.visitRefed_name(r);return e.ok?void 0===this.lender_info?{ok:!1,error:new ie("Cannot borrow borrowed variable. This is likely a BorrowChecker bug.",t.start.line)}:(this.lender_info.type="immutable",this.lender_info.lender_name="&"+this.lender_info.lender_name,{ok:!0,value:!0}):e}return{ok:!1,error:new ie("Refed name not recognized. This is a Parser bug!",t.start.line)}}visitMutable_refed_name(t){const e=t.name(),r=t.refed_name();if(void 0===e&&void 0===r)return{ok:!1,error:new ie("refed_name has no name or refed_name. This is a Parser bug!",t.start.line)};if(void 0!==e){const r=e.text,i=ne(this.lender_scopes,r);if(void 0===i)return{ok:!1,error:new ie(`Variable ${r} not found in lender scopes`,t.start.line)};const[n,s]=i;return s.any_mutable_borrow?{ok:!1,error:new ie(`Cannot borrow ${r} as mutable again`,t.start.line)}:s.immutable_borrow>0?{ok:!1,error:new ie(`Cannot borrow ${r} as mutable because it is also borrowed as immutable`,t.start.line)}:(this.lender_scopes[n].set(r,{immutable_borrow:s.immutable_borrow,any_mutable_borrow:!0}),this.lender_info={lender_name:r,type:"mutable"},{ok:!0,value:!0})}if(void 0!==r){const e=this.visitRefed_name(r);return e.ok?void 0===this.lender_info?{ok:!1,error:new ie("Cannot borrow borrowed variable. This is likely a BorrowChecker bug.",t.start.line)}:(this.lender_info.type="mutable",this.lender_info.lender_name="&mut"+this.lender_info.lender_name,{ok:!0,value:!0}):e}return{ok:!1,error:new ie("Refed name not recognized. This is a Parser bug!",t.start.line)}}visitRefed_name(t){const e=t.immutable_refed_name();if(void 0!==e)return this.visitImmutable_refed_name(e);const r=t.mutable_refed_name();return void 0!==r?this.visitMutable_refed_name(r):{ok:!1,error:new ie("Refed name not recognized. This is a Validator bug.",t.start.line)}}}class oe extends ut.AbstractParseTreeVisitor{constructor(t){super(),this.rule_name="Borrow Checker",this.print_fn=ht(t)}defaultResult(){return!0}aggregateResult(t,e){return t&&e}visitProgram(t){this.print_fn("Calling Borrow Checker");const e=(new se).visit(t);return!!e.ok||(console.error(e.error),!1)}}var ae,_e,le=r(612),ue=r(5606);const ce=!1,he=document.getElementById("output");function pe(t){he.value+=t+"\n",he.scrollTop=he.scrollHeight}let de;null===(ae=document.getElementById("compileBtn"))||void 0===ae||ae.addEventListener("click",(function(){const t=document.getElementById("editor").value;pe("Program:"),pe(t);const e=i.CharStreams.fromString(t),r=new l(e),n=new i.CommonTokenStream(r),s=new x(n);s.removeErrorListeners(),s.addErrorListener({syntaxError:function(t,e,r,i,n,s){pe(`Syntax error at line ${r} column ${i} -> ${n}`),ue.exit(1)}});const o=s.program(),a=[new Rt(ce),new Et(ce),new Dt(ce),new $t(ce),new oe(ce)];pe("Validating...");for(const t of a){const e=t.visit(o);pe("\t"),pe(t.rule_name),pe(":"),pe(e),e||(pe("Validation failed!"),ue.exit(1))}pe("Validation passed!"),pe("");const _=new re(ce);pe("Compiling...");const u=_.visit(o);u.ok||(pe(u.error),ue.exit(1)),pe("Compilation passed!"),de=u.value})),null===(_e=document.getElementById("runBtn"))||void 0===_e||_e.addEventListener("click",(function(){document.getElementById("output").value="";var t=document.getElementById("heapSize").value,e=document.getElementById("workers").value;(0,le.Cj)(function(t){void 0===t.entry_point&&(console.error("entry_point is undefined! Temporarily setting to -1, but there is an error in the compiler."),t.entry_point=-1);const e=[];for(const r of t.functions){const t=[];for(const e of r.instructions)void 0!==e.operands&&0!==e.operands.length?1!=e.operands.length?2!=e.operands.length?e.operands.length>2&&(console.error("Too many operands in instruction:",e),ct.exit(1)):t.push([e.opcode,e.operands[0],e.operands[1]]):t.push([e.opcode,e.operands[0]]):t.push([e.opcode]);e.push([r.stack_size,r.environment_size,r.num_args,t])}return[t.entry_point,e]}(de),t,e)}))},637:(t,e,r)=>{"use strict";var i;r.d(e,{$:()=>i}),function(t){t[t.READY=0]="READY",t[t.BLOCKED=1]="BLOCKED",t[t.RUNNING=2]="RUNNING",t[t.TERMINATED=3]="TERMINATED"}(i||(i={}))},612:(t,e,r)=>{"use strict";r.d(e,{rZ:()=>E,w8:()=>a,Cj:()=>y});var i=r(637);class n{constructor(){this._maxThreadId=-1,this._maxTimeQuanta=15,this._runningThreads=new Set,this._blockedThreads=new Set,this._readyThreads=[],this._exitedThreads=[]}numOfRunningThreads(){return this._runningThreads.size}numOfReadyThreads(){return this._readyThreads.length}createThread(){return this._maxThreadId++,this._readyThreads.push(this._maxThreadId),this._maxThreadId}blockThread(t){this._runningThreads.delete(t),this._blockedThreads.add(t)}unblockThread(t){this._blockedThreads.delete(t),this._readyThreads.push(t)}pauseThread(t){this._runningThreads.delete(t),this._readyThreads.push(t)}runThread(){const t=this._readyThreads.shift();if(void 0!==t){const e=Math.ceil((.5+.5*Math.random())*this._maxTimeQuanta);return this._runningThreads.add(t),[t,e]}return null}removeThread(t){this._runningThreads.delete(t),this._exitedThreads.push(t)}}var s=r(1499);let o=0;var a;!function(t){t[t.CLONE=0]="CLONE",t[t.JOIN=1]="JOIN",t[t.LOCK_INIT=2]="LOCK_INIT",t[t.LOCK=3]="LOCK",t[t.UNLOCK=4]="UNLOCK",t[t.LOCK_DESTROY=5]="LOCK_DESTROY"}(a||(a={}));const _=[],l=new Map,u=new Map,c=new Map,h=new Map,p=new Map,d=new Map;let m,f,v,x=new Uint32Array(new SharedArrayBuffer(4));function T(t,e){e.onmessage=r=>{const n=r.data[0];switch(n.status){case i.$.BLOCKED:m.blockThread(n.ID);break;case i.$.READY:m.pauseThread(n.ID);break;case i.$.TERMINATED:n.ID===v&&function(){for(const t of l.values())t.terminate()}(),m.removeThread(n.ID);const t=h.get(n.ID);if(void 0!==t)for(let e=0;e<t.length;e++)m.unblockThread(t[e]),u.get(t[e]).status=i.$.READY;break;default:throw Error("VM received a thread from worker that is still in RUNNING status")}u.set(n.ID,n);const s=m.runThread();null!==s?e.postMessage([u.get(s[0]),s[1]]):_.push(t)}}function R(t){t.onmessage=t=>{let e,r,n;switch(t.data[0]){case a.CLONE:const l=t.data[1],d=0,f=t.data[2];e=t.data[3];const v=m.createThread(),x={ID:v,FN:l,PC:d,ENV:f,OS:[],RTS:[],RS:{A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0,I:0,J:0,K:0},status:i.$.READY};u.set(v,x),Atomics.store(e,0,v),Atomics.notify(e,0,1);const T=_.shift();if(void 0!==T){const t=m.runThread();if(null===t)throw Error("Scheduler has no thread to run even after new thread was created");p.get(T).port1.postMessage([u.get(t[0]),t[1]])}break;case a.JOIN:const R=t.data[1],E=t.data[2];if(e=t.data[3],!u.has(E))throw Error("VM received a request to join a thread that does not exist");u.get(E).status===i.$.TERMINATED?(Atomics.store(e,0,s._N),Atomics.notify(e,0,1)):(h.has(E)||h.set(E,[]),h.get(E).push(R),Atomics.store(e,0,s.In),Atomics.notify(e,0,1));break;case a.LOCK_INIT:e=t.data[1],o+=1,c.set(o,{ID:o,locked:!1,queue:[]}),Atomics.store(e,0,o),Atomics.notify(e,0,1);break;case a.LOCK:const y=t.data[1];if(r=t.data[2],e=t.data[3],n=c.get(r),void 0===n)throw Error("VM received a request to lock a lock that does not exist");n.locked?(n.queue.push(y),Atomics.store(e,0,s.LV),Atomics.notify(e,0,1)):(n.locked=!0,Atomics.store(e,0,s.XM),Atomics.notify(e,0,1));break;case a.UNLOCK:if(r=t.data[1],n=c.get(r),void 0===n)throw Error("VM received a request to unlock a lock that does not exist");if(!n.locked)throw Error("VM received a request to unlock a lock that is already unlocked");{const t=n.queue.shift();void 0===t?n.locked=!1:(m.unblockThread(t),u.get(t).status=i.$.READY)}break;case a.LOCK_DESTROY:break;default:throw Error("VM received an invalid syscall")}}}const E=3;function y(t,e,s){!function(t,e,i){f=new DataView(new SharedArrayBuffer(t));for(let t=0;t<i;t++){const i=new Worker(new URL(r.p+r.u(747),r.b)),n=t,s=new MessageChannel,o=new MessageChannel;i.postMessage([f,x,e],[s.port2,o.port2]),T(n,s.port1),R(o.port1),p.set(n,s),d.set(n,o),l.set(n,i),_.push(n)}m=new n}(e,t,s),v=m.createThread();const o={ID:v,FN:t[0],PC:0,ENV:-1,OS:[],RTS:[],RS:{A:0,B:0,C:0,D:0,E:0,F:0,G:0,H:0,I:0,J:0,K:0},status:i.$.READY};u.set(v,o),function(){const t=_.shift();if(void 0===t)throw Error("No workers to run machine");{const e=m.runThread();if(null===e)throw Error("Scheduler returns null for runThread after main thread was added");p.get(t).port1.postMessage([u.get(e[0]),e[1]])}}()}},1499:(t,e,r)=>{"use strict";r.d(e,{_N:()=>st,In:()=>ot,XM:()=>at,LV:()=>_t});var i,n=r(637);!function(t){t[t.NOP=0]="NOP",t[t.LDCI=1]="LDCI",t[t.LGCI=2]="LGCI",t[t.LDCF32=3]="LDCF32",t[t.LGCF32=4]="LGCF32",t[t.LDCF64=5]="LDCF64",t[t.LGCF64=6]="LGCF64",t[t.LDCB0=7]="LDCB0",t[t.LDCB1=8]="LDCB1",t[t.LGCB0=9]="LGCB0",t[t.LGCB1=10]="LGCB1",t[t.LGCU=11]="LGCU",t[t.LGCN=12]="LGCN",t[t.LGCS=13]="LGCS",t[t.POPG=14]="POPG",t[t.POPB=15]="POPB",t[t.POPF=16]="POPF",t[t.ADDG=17]="ADDG",t[t.ADDF=18]="ADDF",t[t.SUBG=19]="SUBG",t[t.SUBF=20]="SUBF",t[t.MULG=21]="MULG",t[t.MULF=22]="MULF",t[t.DIVG=23]="DIVG",t[t.DIVF=24]="DIVF",t[t.MODG=25]="MODG",t[t.MODF=26]="MODF",t[t.NOTG=27]="NOTG",t[t.NOTB=28]="NOTB",t[t.LTG=29]="LTG",t[t.LTF=30]="LTF",t[t.GTG=31]="GTG",t[t.GTF=32]="GTF",t[t.LEG=33]="LEG",t[t.LEF=34]="LEF",t[t.GEG=35]="GEG",t[t.GEF=36]="GEF",t[t.EQG=37]="EQG",t[t.EQF=38]="EQF",t[t.EQB=39]="EQB",t[t.NEWC=40]="NEWC",t[t.NEWA=41]="NEWA",t[t.LDLG=42]="LDLG",t[t.LDLF=43]="LDLF",t[t.LDLB=44]="LDLB",t[t.STLG=45]="STLG",t[t.STLB=46]="STLB",t[t.STLF=47]="STLF",t[t.LDPG=48]="LDPG",t[t.LDPF=49]="LDPF",t[t.LDPB=50]="LDPB",t[t.STPG=51]="STPG",t[t.STPB=52]="STPB",t[t.STPF=53]="STPF",t[t.LDAG=54]="LDAG",t[t.LDAB=55]="LDAB",t[t.LDAF=56]="LDAF",t[t.STAG=57]="STAG",t[t.STAB=58]="STAB",t[t.STAF=59]="STAF",t[t.BRT=60]="BRT",t[t.BRF=61]="BRF",t[t.BR=62]="BR",t[t.JMP=63]="JMP",t[t.CALL=64]="CALL",t[t.CALLT=65]="CALLT",t[t.CALLP=66]="CALLP",t[t.CALLTP=67]="CALLTP",t[t.CALLV=68]="CALLV",t[t.CALLTV=69]="CALLTV",t[t.RETG=70]="RETG",t[t.RETF=71]="RETF",t[t.RETB=72]="RETB",t[t.RETU=73]="RETU",t[t.RETN=74]="RETN",t[t.DUP=75]="DUP",t[t.NEWENV=76]="NEWENV",t[t.POPENV=77]="POPENV",t[t.NEWCP=78]="NEWCP",t[t.NEWCV=79]="NEWCV",t[t.NEGG=80]="NEGG",t[t.NEGF=81]="NEGF",t[t.NEQG=82]="NEQG",t[t.NEQF=83]="NEQF",t[t.NEQB=84]="NEQB",t[t.GOTO=85]="GOTO",t[t.NEWT=86]="NEWT",t[t.ENDT=87]="ENDT",t[t.JOIN=88]="JOIN",t[t.NEWL=89]="NEWL",t[t.LOCK=90]="LOCK",t[t.UNLOCK=91]="UNLOCK",t[t.LDPA=92]="LDPA",t[t.DEREF=93]="DEREF",t[t.ARRAY_LEN=1e3]="ARRAY_LEN",t[t.DISPLAY=1001]="DISPLAY",t[t.DRAW_DATA=1002]="DRAW_DATA",t[t.ERROR=1003]="ERROR",t[t.IS_ARRAY=1004]="IS_ARRAY",t[t.IS_BOOL=1005]="IS_BOOL",t[t.IS_FUNC=1006]="IS_FUNC",t[t.IS_NULL=1007]="IS_NULL",t[t.IS_NUMBER=1008]="IS_NUMBER",t[t.IS_STRING=1009]="IS_STRING",t[t.IS_UNDEFINED=1010]="IS_UNDEFINED",t[t.MATH_ABS=1011]="MATH_ABS",t[t.MATH_ACOS=1012]="MATH_ACOS",t[t.MATH_ACOSH=1013]="MATH_ACOSH",t[t.MATH_ASIN=1014]="MATH_ASIN",t[t.MATH_ASINH=1015]="MATH_ASINH",t[t.MATH_ATAN=1016]="MATH_ATAN",t[t.MATH_ATAN2=1017]="MATH_ATAN2",t[t.MATH_ATANH=1018]="MATH_ATANH",t[t.MATH_CBRT=1019]="MATH_CBRT",t[t.MATH_CEIL=1020]="MATH_CEIL",t[t.MATH_CLZ32=1021]="MATH_CLZ32",t[t.MATH_COS=1022]="MATH_COS",t[t.MATH_COSH=1023]="MATH_COSH",t[t.MATH_EXP=1024]="MATH_EXP",t[t.MATH_EXPM1=1025]="MATH_EXPM1",t[t.MATH_FLOOR=1026]="MATH_FLOOR",t[t.MATH_FROUND=1027]="MATH_FROUND",t[t.MATH_HYPOT=1028]="MATH_HYPOT",t[t.MATH_IMUL=1029]="MATH_IMUL",t[t.MATH_LOG=1030]="MATH_LOG",t[t.MATH_LOG1P=1031]="MATH_LOG1P",t[t.MATH_LOG2=1032]="MATH_LOG2",t[t.MATH_LOG10=1033]="MATH_LOG10",t[t.MATH_MAX=1034]="MATH_MAX",t[t.MATH_MIN=1035]="MATH_MIN",t[t.MATH_POW=1036]="MATH_POW",t[t.MATH_RANDOM=1037]="MATH_RANDOM",t[t.MATH_ROUND=1038]="MATH_ROUND",t[t.MATH_SIGN=1039]="MATH_SIGN",t[t.MATH_SIN=1040]="MATH_SIN",t[t.MATH_SINH=1041]="MATH_SINH",t[t.MATH_SQRT=1042]="MATH_SQRT",t[t.MATH_TAN=1043]="MATH_TAN",t[t.MATH_TANH=1044]="MATH_TANH",t[t.MATH_TRUNC=1045]="MATH_TRUNC",t[t.PARSE_INT=1046]="PARSE_INT",t[t.RUNTIME=1047]="RUNTIME",t[t.STREAM=1048]="STREAM",t[t.STRINGIFY=1049]="STRINGIFY",t[t.PROMPT=1050]="PROMPT",t[t.DISPLAY_LIST=1051]="DISPLAY_LIST",t[t.CHAR_AT=1052]="CHAR_AT",t[t.ARITY=1053]="ARITY",t[t.EXECUTE=2e3]="EXECUTE",t[t.TEST_AND_SET=2001]="TEST_AND_SET",t[t.CLEAR=2002]="CLEAR"}(i||(i={}));var s=r(612),o=r(1829);function a(t,e){return t.slice(-1-e)[0]}let _,l,u;const c=5,h=8;function p(t){return _.getFloat64(t*h)}function d(t,e){_.setFloat64(t*h,e)}function m(t,e){return p(t+1+e)}function f(t,e,r){return d(t+1+e,r)}function v(t){return _.getUint8(t*h)}function x(t){return _.getUint16(t*h+c)}function T(t){return v(t)===N?0:x(t)-1}function R(t,e,r){_.setUint8(t*h+e,r)}function E(t,e){return _.getUint8(t*h+e)}function y(t,e,r){_.setUint16(t*h+e,r)}function g(t,e){return _.getUint16(t*h+e)}function A(){if(kt=Atomics.add(l,0,xt),(kt+xt)*h>_.byteLength)throw new Error("OUT OF MEMORY");_.setUint8(kt*h,vt),_.setUint16(kt*h+c,xt),u=kt}const b=1;function w(){Tt=Number(vt),vt=b,xt=1,A(),R(u,7,Tt)}function k(t){return v(t)===b}function L(t){return k(t)&&1===E(t,7)}function C(t){return k(t)&&0===E(t,7)}const N=2;function I(){Tt=vt,vt=N,xt=2,A(),d(u+1,Tt)}function H(t){return v(t)===N}const M=3,P=new TextEncoder,O=new TextDecoder;function G(){P.encode(vt),Tt=P.encode(vt),vt=M,xt=Math.ceil(Tt.length/h)+2,A(),f(u,0,Tt.length);for(let t=0;t<Tt.length;t++)R(u+2,t,Tt[t])}function U(t){return v(t)===M}function S(t){if(!U(t))throw Error("Called HEAP_GET_STRING on an object that is not a string");xt=m(t,0);const e=new Uint8Array(new ArrayBuffer(xt));for(let r=0;r<xt;r++)e[r]=E(t+2,r);return O.decode(e)}function D(){vt=5,xt=1,A()}function F(t){return ct[g(t,2)][s.rZ]}function B(t){return g(t,2)}function V(t){return m(t,0)}function $(){Tt=vt,vt=10,xt=1+Tt,A()}const z=11;function q(){Tt=vt,vt=z,xt=1+Tt,A()}function W(t,e){const[r,i]=e,n=m(t,r);return m(n,i)}function Y(t,e,r){const[i,n]=e;f(m(t,i),n,r)}function K(t,e){const r=x(e);vt=r,q();for(let t=0;t<r-1;t++)f(u,t,m(e,t));return f(u,r-1,t),u}function Q(t){return 12===v(t)}let J;function X(t){return 13===v(t)}function j(t){return m(t,0)}function Z(t){return m(t,0)}function tt(t){return 15===v(t)}function et(t){return g(t,1)}function rt(t){return g(t,3)}function it(t){return m(t,0)}const nt=[];nt[i.NOP]=()=>{Lt+=1},nt[i.GOTO]=()=>{Lt+=pt[Lt][1]},nt[i.LGCI]=()=>{vt=pt[Lt][1],I(),Nt.push(u),Lt+=1},nt[i.LGCF32]=()=>{vt=pt[Lt][1],I(),Nt.push(u),Lt+=1},nt[i.LGCF64]=()=>{vt=pt[Lt][1],I(),Nt.push(u),Lt+=1},nt[i.LGCB0]=()=>{vt=!1,w(),Nt.push(u),Lt+=1},nt[i.LGCB1]=()=>{vt=!0,w(),Nt.push(u),Lt+=1},nt[i.LGCU]=()=>{D(),Nt.push(u),Lt+=1},nt[i.LGCN]=()=>{vt=6,xt=1,A(),Nt.push(u),Lt+=1},nt[i.LGCS]=()=>{vt=pt[Lt][1],G(),Nt.push(u),Lt+=1},nt[i.ADDG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)+vt,I();else{if(!U(bt)||!U(gt))throw Error("Not both arguments to add.g are of type number or type string");vt=S(bt),vt=S(gt)+vt,G()}Nt.push(u),Lt+=1},nt[i.SUBG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),yt=H(bt)&&H(gt),!yt)throw Error("Not both arguments to sub.g are of type number");vt=p(bt+1),vt=p(gt+1)-vt,I(),Nt.push(u),Lt+=1},nt[i.MULG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),yt=H(bt)&&H(gt),!yt)throw Error("Not both arguments to mul.g are of type number");vt=p(bt+1),vt=p(gt+1)*vt,I(),Nt.push(u),Lt+=1},nt[i.DIVG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),yt=H(bt)&&H(gt),!yt)throw Error("Not both arguments to div.g are of type number");vt=p(bt+1),vt=p(gt+1)/vt,I(),Nt.push(u),Lt+=1},nt[i.MODG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),yt=H(bt)&&H(gt),!yt)throw Error("Not both arguments to mod.g are of type number");vt=p(bt+1),vt=p(gt+1)%vt,I(),Nt.push(u),Lt+=1},nt[i.NEGG]=()=>{if(bt=Nt.pop(),yt=H(bt),!yt)throw Error("Argument to neg.g is not of type number");vt=-p(bt+1),I(),Nt.push(u),Lt+=1},nt[i.NOTG]=()=>{if(bt=Nt.pop(),yt=k(bt),!yt)throw Error("Argument to not.g is not of type boolean");L(bt)?(vt=!1,w()):(vt=!0,w()),Nt.push(u),Lt+=1},nt[i.LTG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)<vt;else{if(!U(bt)||!U(gt))throw Error("Not both arguments to lt.g are of type number or type string");vt=S(bt),vt=S(gt)<vt}w(),Nt.push(u),Lt+=1},nt[i.GTG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)>vt;else{if(!U(bt)||!U(gt))throw Error("Not both arguments to gt.g are of type number or type string");vt=S(bt),vt=S(gt)>vt}w(),Nt.push(u),Lt+=1},nt[i.LEG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)<=vt;else{if(!U(bt)||!U(gt))throw Error("Not both arguments to le.g are of type number or type string");vt=S(bt),vt=S(gt)<=vt}w(),Nt.push(u),Lt+=1},nt[i.GEG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)>=vt;else{if(!U(bt)||!U(gt))throw Error("Not both arguments to ge.g are of type number or type string");vt=S(bt),vt=S(gt)>=vt}w(),Nt.push(u),Lt+=1},nt[i.EQG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)===vt;else if(k(bt)&&k(gt))vt=L(bt)&&L(gt)||C(bt)&&C(gt);else{if(!U(bt)||!U(gt))throw Error("Not both arguments to eq.g are of type number or type string or type bool");vt=S(bt),vt=S(gt)===vt}w(),Nt.push(u),Lt+=1},nt[i.NEQG]=()=>{if(bt=Nt.pop(),gt=Nt.pop(),H(bt)&&H(gt))vt=p(bt+1),vt=p(gt+1)!==vt;else if(k(bt)&&k(gt))vt=L(bt)&&C(gt)||L(bt)&&C(gt);else{if(!U(bt)||!U(gt))throw Error("Not both arguments to neq.g are of type number or type string or type bool");vt=S(bt),vt=S(gt)!==vt}w(),Nt.push(u),Lt+=1},nt[i.NEWC]=()=>{vt=[pt[Lt][1],Ct],Tt=vt,vt=7,xt=2,A(),y(u,2,Tt[0]),f(u,0,Tt[1]),Nt.push(u),Lt+=1},nt[i.LDLG]=()=>{if(vt=[T(Ct)-1,pt[Lt][1]],vt=W(Ct,vt),yt=Q(vt),yt)throw Error("access of unassigned name");Nt.push(vt),Lt+=1},nt[i.STLG]=()=>{for(vt=[0,pt[Lt][1]],xt=[T(Ct)-1,pt[Lt][1]],yt=W(Ct,xt);tt(yt);)vt=[rt(yt),et(yt)],yt=it(yt);vt[0]=T(Ct)-1-vt[0],vt=Y(Ct,vt,Nt.pop()),Lt+=1},nt[i.LDPG]=()=>{if(vt=T(Ct)-1-pt[Lt][2],vt=[vt,pt[Lt][1]],vt=W(Ct,vt),yt=Q(vt),yt)throw Error("access of unassigned name");Nt.push(vt),Lt+=1},nt[i.STPG]=()=>{for(vt=[pt[Lt][2],pt[Lt][1]],xt=[T(Ct)-1-pt[Lt][2],pt[Lt][1]],yt=W(Ct,xt);tt(yt);)vt=[rt(yt),et(yt)],yt=it(yt);vt[0]=T(Ct)-1-vt[0],vt=Y(Ct,vt,Nt.pop()),Lt+=1},nt[i.BRT]=()=>{vt=Nt.pop(),L(vt)?Lt+=pt[Lt][1]:Lt+=1},nt[i.BRF]=()=>{vt=Nt.pop(),C(vt)?Lt+=pt[Lt][1]:Lt+=1},nt[i.BR]=()=>{Lt+=pt[Lt][1]},nt[i.CALL]=()=>{gt=a(Nt,pt[Lt][1]),vt=pt[Lt][1],$(),Et=u;for(let t=pt[Lt][1]-1;t>=0;t--)f(Et,t,Nt.pop());Lt+=1,vt=[Ct,Lt,ht],Tt=vt,vt=9,xt=2,A(),f(u,0,Tt[0]),y(u,1,Tt[1]),y(u,3,Tt[2]),It.push(u),Nt.pop(),Ct=K(Et,V(gt)),Lt=0,pt=F(gt),ht=B(gt)},nt[i.CALLT]=()=>{gt=a(Nt,pt[Lt][1]),vt=pt[Lt][1],$(),Et=u;for(let t=pt[Lt][1]-1;t>=0;t--)f(Et,t,Nt.pop());Nt.pop(),Ct=K(Et,V(gt)),Lt=0,pt=F(gt),ht=B(gt)},nt[i.RETG]=()=>{At=It.pop(),9===v(At)&&(Lt=g(At,1),Ct=function(t){return m(t,0)}(At),pt=function(t){return ct[g(t,3)][s.rZ]}(At),ht=function(t){return g(t,3)}(At))},nt[i.POPG]=()=>{Nt.pop(),Lt+=1},nt[i.NEWENV]=()=>{vt=Ct,Tt=vt,vt=8,xt=2,A(),f(u,0,Tt),It.push(u),bt=pt[Lt][1],vt=bt,$(),At=u,Ct=K(At,Ct);for(let t=0;t<bt;t++)f(At,t,J);Lt+=1},nt[i.POPENV]=()=>{if(At=It.pop(),8!==v(At))throw Error("Top of RTS not a block frame when exiting scope");Ct=m(At,0),Lt+=1},nt[i.LDPA]=()=>{vt=T(Ct)-pt[Lt][2],vt=[vt,pt[Lt][1]],vt=W(Ct,vt),vt=[pt[Lt][1],pt[Lt][2],vt],Tt=vt,vt=15,xt=2,A(),f(u,0,Tt[2]),y(u,1,Tt[0]),y(u,3,Tt[1]),Nt.push(u),Lt+=1},nt[i.DEREF]=()=>{if(At=Nt.pop(),!tt(At))throw Error("Trying to dereference a non-address value");At=it(At),Nt.push(At),Lt+=1},nt[i.NEWT]=()=>{vt=pt[Lt][1],vt=function(){const t=new Int32Array(new SharedArrayBuffer(4));return ft.postMessage([s.w8.CLONE,vt,Ct,t]),Atomics.wait(t,0,0),t[0]}(),Tt=vt,vt=14,xt=2,A(),d(u+1,Tt),Nt.push(u),Lt+=1},nt[i.ENDT]=()=>{Lt=pt.length},nt[i.JOIN]=()=>{if(At=Nt.pop(),kt=14===v(At),!kt)throw Error("Join expects a Thread Id to be on top of OS");gt=function(t){const e=new Int32Array(new SharedArrayBuffer(4));return ft.postMessage([s.w8.JOIN,dt,t,e]),Atomics.wait(e,0,0),e[0]}(Z(At)),Lt+=1,gt===ot&&(Ht=n.$.BLOCKED)},nt[i.NEWL]=()=>{vt=function(){const t=new Int32Array(new SharedArrayBuffer(4));return ft.postMessage([s.w8.LOCK_INIT,t]),Atomics.wait(t,0,0),t[0]}(),Tt=vt,vt=13,xt=2,A(),d(u+1,Tt),Nt.push(u),Lt+=1},nt[i.LOCK]=()=>{if(At=Nt.pop(),kt=X(At),!kt)throw Error("Unlock expects a Lock Id to be on top of OS");gt=function(t){const e=new Int32Array(new SharedArrayBuffer(4));return ft.postMessage([s.w8.LOCK,dt,t,e]),Atomics.wait(e,0,0),e[0]}(j(At)),Lt+=1,gt===_t&&(Ht=n.$.BLOCKED)},nt[i.UNLOCK]=()=>{if(At=Nt.pop(),kt=X(At),!kt)throw Error("Unlock expects a Lock Id to be on top of OS");var t;t=j(At),ft.postMessage([s.w8.UNLOCK,t]),Lt+=1},nt[i.DISPLAY]=()=>{vt=pt[Lt][1];let t=[];for(let e=0;e<vt;e++)t.push(lt(Nt.pop()));(0,o.p)(t.join("")),D(),Nt.push(u),Lt+=1};const st=1,ot=-1,at=1,_t=-1;function lt(t){switch(v(t)){case b:return L(t);case N:return p(t+1);case M:return S(t);case 5:return;case 6:return null;case 7:return"<Function>";case 13:return j(t);case 14:return Z(t);default:return t}}let ut,ct,ht,pt,dt,mt,ft,vt=0,xt=0,Tt=0,Rt=0,Et=0,yt=0,gt=0,At=0,bt=0,wt=0,kt=0,Lt=0,Ct=-1,Nt=[],It=[],Ht=n.$.RUNNING;self.onmessage=t=>{const e=t.data,r=t.ports;var o,a,c,h,p;o=e[0],a=e[1],c=e[2],h=r[0],p=r[1],_=o,l=a,u=-1/0,vt=12,xt=1,A(),J=u,mt=h,ft=p,ut=c[0],ct=c[1],mt.onmessage=t=>{const e=t.data,r=function(t,e){if(function(t){vt=t.RS.A,xt=t.RS.B,Tt=t.RS.C,Rt=t.RS.D,Et=t.RS.E,yt=t.RS.F,gt=t.RS.G,At=t.RS.H,bt=t.RS.I,wt=t.RS.J,kt=t.RS.K,pt=ct[t.FN][s.rZ],ht=t.FN,Lt=t.PC,Ct=t.ENV,Nt=t.OS,It=t.RTS,Ht=n.$.RUNNING,dt=t.ID}(t),-1===Ct){vt=1,q(),Ct=u,vt=ct.length-1,$();for(let t=0;t<ct.length-1;t++)f(u,t,J);Ct=K(u,Ct)}for(Pt=!1,Mt=e;Mt>0&&!Pt&&Ht!==n.$.BLOCKED;)ht===ut&&pt[Lt][Ot]===i.RETG?Pt=!0:nt[pt[Lt][Ot]](),Mt-=1;return function(t){t.RS.A=vt,t.RS.B=xt,t.RS.C=Tt,t.RS.D=Rt,t.RS.E=Et,t.RS.F=yt,t.RS.G=gt,t.RS.H=At,t.RS.I=bt,t.RS.J=wt,t.RS.K=kt,t.FN=ht,t.PC=Lt,t.ENV=Ct,t.OS=Nt,t.RTS=It}(t),Ht===n.$.RUNNING&&(t.status=Pt?n.$.TERMINATED:n.$.READY),t}(e[0],e[1]);mt.postMessage([r])}};let Mt,Pt=!0;const Ot=0},3468:()=>{},1603:()=>{}},__webpack_module_cache__={},deferred,next;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var r=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.x=()=>{var t=__webpack_require__.O(void 0,[989],(()=>__webpack_require__(1499)));return __webpack_require__.O(t)},deferred=[],__webpack_require__.O=(t,e,r,i)=>{if(!e){var n=1/0;for(_=0;_<deferred.length;_++){for(var[e,r,i]=deferred[_],s=!0,o=0;o<e.length;o++)(!1&i||n>=i)&&Object.keys(__webpack_require__.O).every((t=>__webpack_require__.O[t](e[o])))?e.splice(o--,1):(s=!1,i<n&&(n=i));if(s){deferred.splice(_--,1);var a=r();void 0!==a&&(t=a)}}return t}i=i||0;for(var _=deferred.length;_>0&&deferred[_-1][2]>i;_--)deferred[_]=deferred[_-1];deferred[_]=[e,r,i]},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var r in e)__webpack_require__.o(e,r)&&!__webpack_require__.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce(((e,r)=>(__webpack_require__.f[r](t,e),e)),[])),__webpack_require__.u=t=>t+".bundle.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),(()=>{__webpack_require__.b=self.location+"";var t={747:1};__webpack_require__.f.i=(e,r)=>{t[e]||importScripts(__webpack_require__.p+__webpack_require__.u(e))};var e=self.webpackChunkrust_js=self.webpackChunkrust_js||[],r=e.push.bind(e);e.push=e=>{var[i,n,s]=e;for(var o in n)__webpack_require__.o(n,o)&&(__webpack_require__.m[o]=n[o]);for(s&&s(__webpack_require__);i.length;)t[i.pop()]=1;r(e)}})(),next=__webpack_require__.x,__webpack_require__.x=()=>__webpack_require__.e(989).then(next);var __webpack_exports__=__webpack_require__.x()})();